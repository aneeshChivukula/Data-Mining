'''
('mse modelr rmses', {'CAT_prices': 0.10638062186810399, 'APA_prices': 0.16925567933884197, 'SUN_prices': 0.20955881503342277, 'ABT_prices': 0.5020951712321089, 'LAKE_prices': 0.10566026298606304, 'UTX_prices': 0.43057081914404777, 'AEM_prices': 0.14326454813221084, 'T_prices': 0.033391623376135764, 'AAPL_prices': 0.7642329962727583, 'AFG_prices': 0.48511460987724503, 'MSFT_prices': 0.1897965685053637, 'WWD_prices': 0.31199758621355667, 'ORCL_prices': 0.49741264362718296, 'MCD_prices': 0.4258135092973906, 'IXIC_prices': 0.25665285776308516, 'B_prices': 0.28671578895086913})
('qme modelr rmses', {'CAT_prices': 0.5060790679800434, 'APA_prices': 0.24365732317159325, 'SUN_prices': 0.42714907145495856, 'ABT_prices': 0.6419927969369505, 'LAKE_prices': 0.16125048027785355, 'UTX_prices': 0.6280369733654089, 'AEM_prices': 0.23008945864521987, 'T_prices': 0.15762412743930138, 'AAPL_prices': 1.2210931139689403, 'AFG_prices': 0.8298099465850824, 'MSFT_prices': 0.3430728190329516, 'WWD_prices': 0.7443534501587998, 'ORCL_prices': 0.41429868389400526, 'MCD_prices': 0.652873317385026, 'IXIC_prices': 0.5612604507645994, 'B_prices': 0.7061986394913153})

qmemodelrrmse :

defaultdict(<type 'dict'>, {'B_prices': {'LAKE_prices': 0.4146300376131409, 'CAT_prices': 0.3911207753708459, 'APA_prices': 0.22339748993581646, 'SUN_prices': 0.3689530958812346, 'ABT_prices': 0.32860004938399595, 'UTX_prices': 0.48384622650146714, 'WWD_prices': 0.47062696604256826, 'AEM_prices': 0.3123011987939408, 'AAPL_prices': 0.30901486098098646, 'AFG_prices': 0.45372068182577363, 'MSFT_prices': 0.37161372123391934, 'ORCL_prices': 0.3384778854540904, 'MCD_prices': 0.4513163531718749, 'IXIC_prices': 0.2877006089326604, 'T_prices': 0.3325053282480513}, 'LAKE_prices': {'B_prices': nan, 'AAPL_prices': nan, 'APA_prices': nan, 'SUN_prices': nan, 'ABT_prices': nan, 'WWD_prices': nan, 'AEM_prices': nan, 'T_prices': nan, 'UTX_prices': nan, 'AFG_prices': nan, 'MSFT_prices': nan, 'ORCL_prices': nan, 'MCD_prices': nan, 'IXIC_prices': nan, 'CAT_prices': nan}, 'APA_prices': {'B_prices': 0.20850905987842003, 'LAKE_prices': 0.15318894930311142, 'SUN_prices': 0.17474951770322075, 'ABT_prices': 0.13161437406763554, 'UTX_prices': 0.15828639578127413, 'WWD_prices': 0.14721047399975246, 'AEM_prices': 0.17642601310401956, 'T_prices': 0.18964381919077014, 'AAPL_prices': 0.14083702229877879, 'AFG_prices': 0.18296971131859358, 'MSFT_prices': 0.16521637270641942, 'ORCL_prices': 0.15318722461329132, 'MCD_prices': 0.19431469644105548, 'IXIC_prices': 0.15853136351421093, 'CAT_prices': 0.18381846961792098}, 'SUN_prices': {'B_prices': nan, 'LAKE_prices': nan, 'APA_prices': nan, 'T_prices': nan, 'ABT_prices': nan, 'UTX_prices': nan, 'WWD_prices': nan, 'AEM_prices': nan, 'AAPL_prices': nan, 'AFG_prices': nan, 'MSFT_prices': nan, 'ORCL_prices': nan, 'MCD_prices': nan, 'IXIC_prices': nan, 'CAT_prices': nan}, 'ABT_prices': {'B_prices': 0.5065055046202931, 'LAKE_prices': 0.5903879073933848, 'APA_prices': 0.5545200492735918, 'SUN_prices': 0.5180895431006912, 'UTX_prices': 0.5575148502647136, 'WWD_prices': 0.5110075841311017, 'AEM_prices': 0.5571086372880942, 'T_prices': 0.5780145741069559, 'AAPL_prices': 0.5170244375137253, 'AFG_prices': 0.5314176612772116, 'MSFT_prices': 0.5474148687893631, 'ORCL_prices': 0.5380749961077551, 'MCD_prices': 0.5350631765099837, 'IXIC_prices': 0.5505128277281054, 'CAT_prices': 0.5188632266250433}, 'UTX_prices': {'B_prices': 0.3915030103866542, 'LAKE_prices': 0.4682867254820223, 'APA_prices': 0.3844378719754922, 'SUN_prices': 0.2960067322557173, 'ABT_prices': 0.319970200226461, 'WWD_prices': 0.2623732148255586, 'AEM_prices': 0.4182882989083568, 'T_prices': 0.42172439514882026, 'AAPL_prices': 0.32305511857707797, 'AFG_prices': 0.3599679791042391, 'MSFT_prices': 0.34406728499223993, 'ORCL_prices': 0.33369944682494107, 'MCD_prices': 0.22333928454948623, 'IXIC_prices': 0.45043457840208906, 'CAT_prices': 0.4702853383176741}, 'WWD_prices': {'B_prices': 0.45377906518820055, 'LAKE_prices': 0.4920684678591061, 'APA_prices': 0.34654029632886957, 'SUN_prices': 0.3340360896058264, 'ABT_prices': 0.38225032867008346, 'UTX_prices': 0.4865818622699933, 'AEM_prices': 0.45029180408140473, 'T_prices': 0.3077927682171001, 'AAPL_prices': 0.3214890598281774, 'AFG_prices': 0.5399688786204172, 'MSFT_prices': 0.44296230457243213, 'ORCL_prices': 0.442235959097005, 'MCD_prices': 0.2710955830272959, 'IXIC_prices': 0.3666650400703648, 'CAT_prices': 0.30318252712374144}, 'AEM_prices': {'B_prices': 0.19795158827696044, 'LAKE_prices': 0.169320421545661, 'APA_prices': 0.23925439172492136, 'SUN_prices': 0.1874557038806252, 'ABT_prices': 0.2677933319143495, 'UTX_prices': 0.20759360305361352, 'WWD_prices': 0.1691983597224405, 'T_prices': 0.19374555769821664, 'AAPL_prices': 0.17067515860671206, 'AFG_prices': 0.23830635042824153, 'MSFT_prices': 0.2502563948743119, 'ORCL_prices': 0.15007411023806275, 'MCD_prices': 0.27326159717552656, 'IXIC_prices': 0.19523872195102682, 'CAT_prices': 0.1767214615116601}, 'T_prices': {'B_prices': 0.06918974767535643, 'LAKE_prices': 0.05568068889577201, 'APA_prices': 0.07655778857416186, 'SUN_prices': 0.10814186563227084, 'ABT_prices': 0.09523405125870416, 'UTX_prices': 0.06043652912281863, 'WWD_prices': 0.17588925918758644, 'AEM_prices': 0.1077933668352847, 'AAPL_prices': 0.09062372672622517, 'AFG_prices': 0.11976517117541437, 'MSFT_prices': 0.056652895376614845, 'ORCL_prices': 0.08337118559699737, 'MCD_prices': 0.08233329124130269, 'IXIC_prices': 0.12280119758589825, 'CAT_prices': 0.10332986233474228}, 'AAPL_prices': {'B_prices': 0.8686087605587882, 'LAKE_prices': 0.6406351721971714, 'APA_prices': 0.6611205396015514, 'SUN_prices': 0.6660582149606771, 'ABT_prices': 0.5722212364852876, 'WWD_prices': 0.6378626831438369, 'AEM_prices': 0.3848525130378647, 'T_prices': 0.6825868586695745, 'UTX_prices': 0.5281290760673014, 'AFG_prices': 0.5723338185235916, 'MSFT_prices': 0.7733263017756774, 'ORCL_prices': 0.7169518620404839, 'MCD_prices': 0.7802462307766532, 'IXIC_prices': 0.7676771448667817, 'CAT_prices': 0.5261260253444308}, 'AFG_prices': {'B_prices': 0.3805196089176195, 'LAKE_prices': 0.5249871774651627, 'APA_prices': 0.5746594638288243, 'SUN_prices': 0.591020844229113, 'ABT_prices': 0.5185616052313409, 'WWD_prices': 0.7366187264592662, 'AEM_prices': 0.5482160050323919, 'T_prices': 0.6199330196809055, 'AAPL_prices': 0.6653162275585884, 'UTX_prices': 0.6011444208470841, 'MSFT_prices': 0.5949010433324455, 'ORCL_prices': 0.5380849102769706, 'MCD_prices': 0.6482433266747988, 'IXIC_prices': 0.5731141753094874, 'CAT_prices': 0.5501287027974191}, 'MSFT_prices': {'B_prices': 0.18110427967361875, 'LAKE_prices': 0.20323200586220272, 'APA_prices': 0.18097045546707197, 'SUN_prices': 0.17241767631595903, 'ABT_prices': 0.2788683612049099, 'UTX_prices': 0.14036239553903948, 'WWD_prices': 0.17854521942239066, 'AEM_prices': 0.18846917214670764, 'T_prices': 0.16874752101725674, 'AAPL_prices': 0.24095556453664427, 'AFG_prices': 0.19725533728636924, 'ORCL_prices': 0.15627961450311018, 'MCD_prices': 0.2645851805139376, 'IXIC_prices': 0.21840740510445245, 'CAT_prices': 0.16388853992633343}, 'ORCL_prices': {'B_prices': 0.47628223770646894, 'LAKE_prices': 0.38609737724392174, 'APA_prices': 0.36926397312752396, 'SUN_prices': 0.3314051597609656, 'ABT_prices': 0.5719775275093045, 'UTX_prices': 0.2959175018111483, 'WWD_prices': 0.5855586623892177, 'AEM_prices': 0.5515821483307519, 'T_prices': 0.3910429306226629, 'AAPL_prices': 0.22746139602313567, 'AFG_prices': 0.369912457398278, 'MSFT_prices': 0.42366297547502957, 'MCD_prices': 0.4955948642742481, 'IXIC_prices': 0.3607598324081458, 'CAT_prices': 0.47407226897777405}, 'MCD_prices': {'B_prices': 0.4623952102513708, 'LAKE_prices': 0.4319516852420338, 'APA_prices': 0.4380545959282067, 'SUN_prices': 0.539297037011784, 'ABT_prices': 0.34454262251188333, 'UTX_prices': 0.5730189638766683, 'WWD_prices': 0.28792658201295707, 'AEM_prices': 0.5067639714319132, 'T_prices': 0.5346116848704833, 'AAPL_prices': 0.3281558759180013, 'AFG_prices': 0.3994561115692659, 'MSFT_prices': 0.3875164499175232, 'ORCL_prices': 0.4719122030316641, 'IXIC_prices': 0.3826971820306574, 'CAT_prices': 0.44827552040953056}, 'IXIC_prices': {'B_prices': 0.387122984492001, 'LAKE_prices': 0.3854278296151402, 'APA_prices': 0.38766508380132686, 'SUN_prices': 0.5470574154298842, 'ABT_prices': 0.4959063932409922, 'UTX_prices': 0.42117042546443567, 'WWD_prices': 0.5264036592151978, 'AEM_prices': 0.3640512156340779, 'AAPL_prices': 0.4261889133141833, 'AFG_prices': 0.33459056144941557, 'MSFT_prices': 0.4931724204182961, 'ORCL_prices': 0.3702236747174801, 'MCD_prices': 0.47877047864310057, 'CAT_prices': 0.38551426124416577, 'T_prices': 0.4578732580633802}, 'CAT_prices': {'B_prices': 0.3409718989202171, 'LAKE_prices': 0.25656651921595347, 'APA_prices': 0.22781178056998397, 'SUN_prices': 0.3876212191433728, 'ABT_prices': 0.2915590618867131, 'UTX_prices': 0.2637553680093619, 'WWD_prices': 0.3693659772916638, 'AEM_prices': 0.49695483160183157, 'AAPL_prices': 0.3447727979393182, 'AFG_prices': 0.2804683772786815, 'MSFT_prices': 0.3339303999149647, 'ORCL_prices': 0.2346801876972594, 'MCD_prices': 0.3132437651065225, 'IXIC_prices': 0.26708683820726914, 'T_prices': 0.3169944529002923}})

qmemodelurrmse :

defaultdict(<type 'dict'>, {'B_prices': {'LAKE_prices': 0.7016947189805306, 'CAT_prices': 0.5089633930201775, 'APA_prices': 0.6924408206717182, 'SUN_prices': 0.6941612637009232, 'ABT_prices': 0.5502049131935915, 'UTX_prices': 0.4521434711598251, 'WWD_prices': 0.33066101926036706, 'AEM_prices': 0.6969756733659476, 'AAPL_prices': 0.42013954968527467, 'AFG_prices': 0.3155272623320002, 'MSFT_prices': 0.707938420798012, 'ORCL_prices': 0.472314627203148, 'MCD_prices': 0.5307202259866722, 'IXIC_prices': 0.650982088541847, 'T_prices': 0.8164957026341092}, 'LAKE_prices': {'B_prices': nan, 'AAPL_prices': nan, 'APA_prices': nan, 'SUN_prices': nan, 'ABT_prices': nan, 'WWD_prices': nan, 'AEM_prices': nan, 'T_prices': nan, 'UTX_prices': nan, 'AFG_prices': nan, 'MSFT_prices': nan, 'ORCL_prices': nan, 'MCD_prices': nan, 'IXIC_prices': nan, 'CAT_prices': nan}, 'APA_prices': {'B_prices': 0.7546557387256098, 'LAKE_prices': 0.786910491670782, 'SUN_prices': 0.8439354969094784, 'ABT_prices': 0.8036970191390048, 'UTX_prices': 0.6633662623669883, 'WWD_prices': 0.6610909412372151, 'AEM_prices': 0.47672668878443986, 'T_prices': 0.9272960342690608, 'AAPL_prices': 0.89519405533523, 'AFG_prices': 0.8523145738148326, 'MSFT_prices': 0.9931460842354564, 'ORCL_prices': 0.6853350822298703, 'MCD_prices': 0.6912363822876422, 'IXIC_prices': 0.8878964799116491, 'CAT_prices': 0.5946141907714088}, 'SUN_prices': {'B_prices': nan, 'LAKE_prices': nan, 'APA_prices': nan, 'T_prices': nan, 'ABT_prices': nan, 'UTX_prices': nan, 'WWD_prices': nan, 'AEM_prices': nan, 'AAPL_prices': nan, 'AFG_prices': nan, 'MSFT_prices': nan, 'ORCL_prices': nan, 'MCD_prices': nan, 'IXIC_prices': nan, 'CAT_prices': nan}, 'ABT_prices': {'B_prices': 0.2888712365531043, 'LAKE_prices': 0.526094540928789, 'APA_prices': 0.4657875842440372, 'SUN_prices': 0.5058438661277108, 'UTX_prices': 0.2895670362330332, 'WWD_prices': 0.29545197077970925, 'AEM_prices': 0.48775493619426136, 'T_prices': 0.47413304065511813, 'AAPL_prices': 0.24050294690159024, 'AFG_prices': 0.2706399922172551, 'MSFT_prices': 0.38946236075594215, 'ORCL_prices': 0.3243152654609193, 'MCD_prices': 0.4168356922001058, 'IXIC_prices': 0.3629477090494031, 'CAT_prices': 0.3436107483782422}, 'UTX_prices': {'B_prices': 0.44089642083062897, 'LAKE_prices': 0.7076812893048264, 'APA_prices': 0.5129584818449567, 'SUN_prices': 0.6417296045780272, 'ABT_prices': 0.6049068767953413, 'WWD_prices': 0.27995015101391324, 'AEM_prices': 0.5449809250825535, 'T_prices': 0.7021564416902234, 'AAPL_prices': 0.40820978208525355, 'AFG_prices': 0.6425194322242532, 'MSFT_prices': 0.6892647656415841, 'ORCL_prices': 0.3577178856083947, 'MCD_prices': 0.4338188852509752, 'IXIC_prices': 0.5570815853936966, 'CAT_prices': 0.48029344289264847}, 'WWD_prices': {'B_prices': 0.7198285438615706, 'LAKE_prices': 0.9920459167306328, 'APA_prices': 0.8318298094082527, 'SUN_prices': 1.0094185555019788, 'ABT_prices': 0.7919742457705116, 'UTX_prices': 0.6602841755692075, 'AEM_prices': 0.7646167235831557, 'T_prices': 1.1294941722930052, 'AAPL_prices': 0.3923725166254872, 'AFG_prices': 0.645731788517523, 'MSFT_prices': 1.1345360840340384, 'ORCL_prices': 0.631232164543286, 'MCD_prices': 0.7199809521566201, 'IXIC_prices': 0.9330855901767559, 'CAT_prices': 0.7165447288191621}, 'AEM_prices': {'B_prices': 0.8896211466171358, 'LAKE_prices': 0.856019064095109, 'APA_prices': 0.7499393777718604, 'SUN_prices': 0.9876183610011505, 'ABT_prices': 1.0303628983116104, 'UTX_prices': 0.8056160455902305, 'WWD_prices': 0.7481522306215294, 'T_prices': 1.1771367317623211, 'AAPL_prices': 0.9766971018891183, 'AFG_prices': 0.9720232046530511, 'MSFT_prices': 1.0359443447410497, 'ORCL_prices': 0.8156824118497372, 'MCD_prices': 0.7700154787423416, 'IXIC_prices': 1.0038374018284386, 'CAT_prices': 0.7657315837733912}, 'T_prices': {'B_prices': 0.19248751320988808, 'LAKE_prices': 0.19479491259276738, 'APA_prices': 0.27087082663012485, 'SUN_prices': 0.22603602356676872, 'ABT_prices': 0.23535174299895353, 'UTX_prices': 0.2871587579863758, 'WWD_prices': 0.16122849165722605, 'AEM_prices': 0.1788466656743434, 'AAPL_prices': 0.3965315103684603, 'AFG_prices': 0.22137069785527355, 'MSFT_prices': 0.1473266302682883, 'ORCL_prices': 0.18566118578023524, 'MCD_prices': 0.26951248268542394, 'IXIC_prices': 0.2036228971459581, 'CAT_prices': 0.2843474718016527}, 'AAPL_prices': {'B_prices': 1.2976607766437065, 'LAKE_prices': 1.5971793568165402, 'APA_prices': 1.424139951533862, 'SUN_prices': 1.6464490217498795, 'ABT_prices': 1.2581332141963706, 'WWD_prices': 0.9907342738383328, 'AEM_prices': 1.4941493238540775, 'T_prices': 1.8338165992733015, 'UTX_prices': 1.367150565238871, 'AFG_prices': 1.1601630002220369, 'MSFT_prices': 1.6971226135687236, 'ORCL_prices': 1.2009258166775634, 'MCD_prices': 1.0982506228444182, 'IXIC_prices': 1.5227394877432705, 'CAT_prices': 1.323199931938903}, 'AFG_prices': {'B_prices': 0.45915370996945687, 'LAKE_prices': 0.7981551610830869, 'APA_prices': 0.7920648580529742, 'SUN_prices': 0.808847233592523, 'ABT_prices': 0.5964081989170206, 'WWD_prices': 0.37016003186092195, 'AEM_prices': 0.7636650462060707, 'T_prices': 0.8064608311055005, 'AAPL_prices': 0.33369776392889994, 'UTX_prices': 0.5410619852857604, 'MSFT_prices': 0.7243131132352303, 'ORCL_prices': 0.5080031191931603, 'MCD_prices': 0.44188553467755093, 'IXIC_prices': 0.5421315895957216, 'CAT_prices': 0.6083056394405788}, 'MSFT_prices': {'B_prices': 0.33458238330866913, 'LAKE_prices': 0.44516790387033955, 'APA_prices': 0.4925894982126364, 'SUN_prices': 0.48223469629093574, 'ABT_prices': 0.33581947418702257, 'UTX_prices': 0.3832865806848564, 'WWD_prices': 0.20913152010125477, 'AEM_prices': 0.5092532490985727, 'T_prices': 0.430177983677076, 'AAPL_prices': 0.24918639905694293, 'AFG_prices': 0.26325718219749283, 'ORCL_prices': 0.3302598802779448, 'MCD_prices': 0.3137328159710175, 'IXIC_prices': 0.2819704384375365, 'CAT_prices': 0.4110614943032135}, 'ORCL_prices': {'B_prices': 0.44207299175294923, 'LAKE_prices': 0.6735808973178267, 'APA_prices': 0.5645637818296632, 'SUN_prices': 0.6871904104974049, 'ABT_prices': 0.33322911738404964, 'UTX_prices': 0.33042845712593444, 'WWD_prices': 0.30274461153833243, 'AEM_prices': 0.5497946695484502, 'T_prices': 0.7249791186747044, 'AAPL_prices': 0.2573345263429603, 'AFG_prices': 0.33143021202419065, 'MSFT_prices': 0.4867339739349905, 'MCD_prices': 0.2666872958900017, 'IXIC_prices': 0.5022498922434936, 'CAT_prices': 0.3920066467162806}, 'MCD_prices': {'B_prices': 0.4518648197483556, 'LAKE_prices': 0.7572436794773074, 'APA_prices': 0.6342906439181828, 'SUN_prices': 0.8334869882942536, 'ABT_prices': 0.6241624033875798, 'UTX_prices': 0.4737117600126485, 'WWD_prices': 0.3203254790041359, 'AEM_prices': 0.6339319481505488, 'T_prices': 0.7519466595656629, 'AAPL_prices': 0.332092885104783, 'AFG_prices': 0.5249109749112472, 'MSFT_prices': 0.6963496419155214, 'ORCL_prices': 0.2779624030596743, 'IXIC_prices': 0.49100127618744244, 'CAT_prices': 0.5909852371085142}, 'IXIC_prices': {'B_prices': 0.297591188817872, 'LAKE_prices': 0.5326173671138783, 'APA_prices': 0.5682812555204902, 'SUN_prices': 0.5444659068829188, 'ABT_prices': 0.31145038675400677, 'UTX_prices': 0.37131549193315455, 'WWD_prices': 0.2083728798743827, 'AEM_prices': 0.6120578639516013, 'AAPL_prices': 0.21500174123175383, 'AFG_prices': 0.23833847958517887, 'MSFT_prices': 0.42831477348200747, 'ORCL_prices': 0.3304343891391798, 'MCD_prices': 0.3492486691512704, 'CAT_prices': 0.3996793836893482, 'T_prices': 0.5072077561002306}, 'CAT_prices': {'B_prices': 0.5175322805146441, 'LAKE_prices': 0.6548388049710289, 'APA_prices': 0.5226092108222713, 'SUN_prices': 0.6996324395020538, 'ABT_prices': 0.5828427475485382, 'UTX_prices': 0.4660001198682508, 'WWD_prices': 0.3913202237945256, 'AEM_prices': 0.5333735946518752, 'AAPL_prices': 0.5669339728531829, 'AFG_prices': 0.5166250508863176, 'MSFT_prices': 0.7916651671211363, 'ORCL_prices': 0.5039009886868647, 'MCD_prices': 0.454812677791122, 'IXIC_prices': 0.6813654589440187, 'T_prices': 0.8315150001527785}})


msemodelrrmse :

defaultdict(<type 'dict'>, {'B_prices': {'LAKE_prices': 0.3847108543903107, 'CAT_prices': 0.40994882372774893, 'APA_prices': 0.4369493559655407, 'SUN_prices': 0.2971631367107011, 'ABT_prices': 0.3146482427633146, 'UTX_prices': 0.3118535428383806, 'WWD_prices': 0.33028312020721723, 'AEM_prices': 0.30817396386180396, 'AAPL_prices': 0.350387654428354, 'AFG_prices': 0.37785220906953476, 'MSFT_prices': 0.4683593901018316, 'ORCL_prices': 0.4364825934660563, 'MCD_prices': 0.39402368732029863, 'IXIC_prices': 0.2820363305815109, 'T_prices': 0.2512847102720457}, 'LAKE_prices': {'B_prices': 0.17124778464780138, 'AAPL_prices': 0.1645670918003806, 'APA_prices': 0.15341877222204875, 'SUN_prices': 0.16395923825304679, 'ABT_prices': 0.15490971518006286, 'WWD_prices': 0.1736291333592937, 'AEM_prices': 0.16563315734328377, 'T_prices': 0.1481879284872754, 'UTX_prices': 0.16543285644570635, 'AFG_prices': 0.19046798472241613, 'MSFT_prices': 0.19549876405226885, 'ORCL_prices': 0.16822446139421324, 'MCD_prices': 0.14833425029549796, 'IXIC_prices': 0.18264002535127585, 'CAT_prices': 0.17986746491640818}, 'APA_prices': {'B_prices': 0.17400193441557363, 'LAKE_prices': 0.1223390113049675, 'SUN_prices': 0.09981263987983602, 'ABT_prices': 0.16197947190987833, 'UTX_prices': 0.08849992932719487, 'WWD_prices': 0.1131686933236247, 'AEM_prices': 0.17088257685131614, 'T_prices': 0.11699503000666582, 'AAPL_prices': 0.11356200230673005, 'AFG_prices': 0.11554930055876056, 'MSFT_prices': 0.09500574324729057, 'ORCL_prices': 0.10303336760611616, 'MCD_prices': 0.09804952313607236, 'IXIC_prices': 0.14554329344816305, 'CAT_prices': 0.13641724018402324}, 'SUN_prices': {'B_prices': 0.20018586561042184, 'LAKE_prices': 0.21664125385553118, 'APA_prices': 0.24131231416525342, 'T_prices': 0.1928139320621243, 'ABT_prices': 0.23221028254033857, 'UTX_prices': 0.20976845190604818, 'WWD_prices': 0.2119245968850381, 'AEM_prices': 0.22106660425754743, 'AAPL_prices': 0.2166610233132839, 'AFG_prices': 0.20599806404419319, 'MSFT_prices': 0.22757376853386604, 'ORCL_prices': 0.25189517385278515, 'MCD_prices': 0.19003032506111142, 'IXIC_prices': 0.22294520068853987, 'CAT_prices': 0.1924633235704773}, 'ABT_prices': {'B_prices': 0.4838764230997439, 'LAKE_prices': 0.41453612143420526, 'APA_prices': 0.46682102999578506, 'SUN_prices': 0.4901383182195263, 'UTX_prices': 0.472990303552423, 'WWD_prices': 0.46680176808706936, 'AEM_prices': 0.48943300522969907, 'T_prices': 0.4721526925877894, 'AAPL_prices': 0.48251347315462767, 'AFG_prices': 0.5192835362091307, 'MSFT_prices': 0.49408475577607075, 'ORCL_prices': 0.4645558300630067, 'MCD_prices': 0.48272957222347906, 'IXIC_prices': 0.4740261360828281, 'CAT_prices': 0.4408636993208739}, 'UTX_prices': {'B_prices': 0.31744779188838484, 'LAKE_prices': 0.2649265026489689, 'APA_prices': 0.26047229994025445, 'SUN_prices': 0.3155928682269058, 'ABT_prices': 0.297501177504958, 'WWD_prices': 0.2621944905555158, 'AEM_prices': 0.33795254572519856, 'T_prices': 0.31075637852113763, 'AAPL_prices': 0.32544447033184787, 'AFG_prices': 0.23006795773280242, 'MSFT_prices': 0.3706869390750668, 'ORCL_prices': 0.3011527609954707, 'MCD_prices': 0.3175139533378523, 'IXIC_prices': 0.30662544831705685, 'CAT_prices': 0.26971832911037535}, 'WWD_prices': {'B_prices': 0.4377410586961886, 'LAKE_prices': 0.257779365413968, 'APA_prices': 0.16709945871025586, 'SUN_prices': 0.35764056198979755, 'ABT_prices': 0.4174446292715233, 'UTX_prices': 0.2597848043221183, 'AEM_prices': 0.21985778990601523, 'T_prices': 0.3518656796383599, 'AAPL_prices': 0.2263222341195495, 'AFG_prices': 0.2554684204814936, 'MSFT_prices': 0.23516711610209962, 'ORCL_prices': 0.2694506659450384, 'MCD_prices': 0.2966956563958424, 'IXIC_prices': 0.32082179244863707, 'CAT_prices': 0.3799209483012014}, 'AEM_prices': {'B_prices': 0.18688685570940614, 'LAKE_prices': 0.2257553166650185, 'APA_prices': 0.1956377140408785, 'SUN_prices': 0.21130658616391243, 'ABT_prices': 0.22946647666675402, 'UTX_prices': 0.25411898921444687, 'WWD_prices': 0.16312955133804696, 'T_prices': 0.24090074662925126, 'AAPL_prices': 0.21452523779912766, 'AFG_prices': 0.24159927169712928, 'MSFT_prices': 0.21682239966445802, 'ORCL_prices': 0.3155750922601156, 'MCD_prices': 0.19240588410965226, 'IXIC_prices': 0.20635038326812624, 'CAT_prices': 0.12989139138478278}, 'T_prices': {'B_prices': 0.07238442520895015, 'LAKE_prices': 0.04589430625395646, 'APA_prices': 0.07488607651892101, 'SUN_prices': 0.07269336832443905, 'ABT_prices': 0.05638829708808328, 'UTX_prices': 0.1028828500471506, 'WWD_prices': 0.06293150570226136, 'AEM_prices': 0.12263528367262172, 'AAPL_prices': 0.06400359805074335, 'AFG_prices': 0.08261737650615936, 'MSFT_prices': 0.07678682487558315, 'ORCL_prices': 0.07669965122684785, 'MCD_prices': 0.06464174209067775, 'IXIC_prices': 0.11239302483049848, 'CAT_prices': 0.06178789078710882}, 'AAPL_prices': {'B_prices': 0.6266525703562722, 'LAKE_prices': 0.6447207269382335, 'APA_prices': 0.5077317733373204, 'SUN_prices': 0.5999166700989581, 'ABT_prices': 0.6674782432029771, 'WWD_prices': 0.5478075134375352, 'AEM_prices': 0.5320786448396353, 'T_prices': 0.6339215545649726, 'UTX_prices': 0.563415694855949, 'AFG_prices': 0.5698439023786738, 'MSFT_prices': 0.5788335758501257, 'ORCL_prices': 0.48511437530730456, 'MCD_prices': 0.47532618290394807, 'IXIC_prices': 0.59371545055324, 'CAT_prices': 0.33176674585304733}, 'AFG_prices': {'B_prices': 0.6040559486577257, 'LAKE_prices': 0.4886292984809907, 'APA_prices': 0.4470537200866247, 'SUN_prices': 0.4700367560454632, 'ABT_prices': 0.39714165067522145, 'WWD_prices': 0.4100346179629337, 'AEM_prices': 0.40744074367233246, 'T_prices': 0.3795141787856052, 'AAPL_prices': 0.42207852895901393, 'UTX_prices': 0.48008476830053765, 'MSFT_prices': 0.34787932067958577, 'ORCL_prices': 0.4771096760613684, 'MCD_prices': 0.5229099119239, 'IXIC_prices': 0.5187951792151091, 'CAT_prices': 0.38617193589520976}, 'MSFT_prices': {'B_prices': 0.2613529240692833, 'LAKE_prices': 0.2876076200407543, 'APA_prices': 0.30270790282969484, 'SUN_prices': 0.2523919213280841, 'ABT_prices': 0.30473672485488734, 'UTX_prices': 0.27735244436471185, 'WWD_prices': 0.2647623186194845, 'AEM_prices': 0.2782708616350708, 'T_prices': 0.29479168791933735, 'AAPL_prices': 0.2559649149721099, 'AFG_prices': 0.2842305930426026, 'ORCL_prices': 0.3348938334490843, 'MCD_prices': 0.28931115341422536, 'IXIC_prices': 0.299417331194138, 'CAT_prices': 0.2690469343074331}, 'ORCL_prices': {'B_prices': 0.2137681538418535, 'LAKE_prices': 0.21515217119948055, 'APA_prices': 0.1749940806477662, 'SUN_prices': 0.16107761536590143, 'ABT_prices': 0.23077135334735177, 'UTX_prices': 0.1320881253069182, 'WWD_prices': 0.11593175127492528, 'AEM_prices': 0.16250928998948258, 'T_prices': 0.1447824822287019, 'AAPL_prices': 0.11648926755138105, 'AFG_prices': 0.14446292134955993, 'MSFT_prices': 0.18644239982707833, 'MCD_prices': 0.21978694631982684, 'IXIC_prices': 0.2558452550665878, 'CAT_prices': 0.16326621666289126}, 'MCD_prices': {'B_prices': 0.3935242059986443, 'LAKE_prices': 0.43437785177415333, 'APA_prices': 0.3522848285543034, 'SUN_prices': 0.5369504886027614, 'ABT_prices': 0.41562332210345493, 'UTX_prices': 0.38926871619271075, 'WWD_prices': 0.4590855520860355, 'AEM_prices': 0.3731304631347116, 'T_prices': 0.40579594302147826, 'AAPL_prices': 0.4010183449771903, 'AFG_prices': 0.40775668954731464, 'MSFT_prices': 0.41263300523886387, 'ORCL_prices': 0.39719834479716676, 'IXIC_prices': 0.33071418936550595, 'CAT_prices': 0.33965661391305635}, 'IXIC_prices': {'B_prices': 0.32312898575607596, 'LAKE_prices': 0.37140940821996227, 'APA_prices': 0.35525397181857676, 'SUN_prices': 0.33788910652657356, 'ABT_prices': 0.3517139709816808, 'UTX_prices': 0.35539385644507615, 'WWD_prices': 0.4423126595334102, 'AEM_prices': 0.33585211563280726, 'AAPL_prices': 0.4520879187402651, 'AFG_prices': 0.3453995172977664, 'MSFT_prices': 0.30904208583545345, 'ORCL_prices': 0.29511594336580077, 'MCD_prices': 0.3804950923795345, 'CAT_prices': 0.4075646880356838, 'T_prices': 0.3336774550995275}, 'CAT_prices': {'B_prices': 0.10019765388871249, 'LAKE_prices': 0.15488702586321074, 'APA_prices': 0.0726915398557763, 'SUN_prices': 0.07534214592434782, 'ABT_prices': 0.15350921436284298, 'UTX_prices': 0.07392278445983967, 'WWD_prices': 0.07415675132763926, 'AEM_prices': 0.09012997914442836, 'AAPL_prices': 0.19910865895781352, 'AFG_prices': 0.15775854759036861, 'MSFT_prices': 0.15167931443269317, 'ORCL_prices': 0.1279235953707699, 'MCD_prices': 0.13053338298252773, 'IXIC_prices': 0.10877475240337728, 'T_prices': 0.08299576747493397}})

msemodelurrmse :

defaultdict(<type 'dict'>, {'B_prices': {'LAKE_prices': 0.7111177502547182, 'CAT_prices': 0.42242348199078583, 'APA_prices': 0.6771544622962504, 'SUN_prices': 0.7134024629108746, 'ABT_prices': 0.44969713582470655, 'UTX_prices': 0.3597913889266317, 'WWD_prices': 0.3159596147478967, 'AEM_prices': 0.6943014593063542, 'AAPL_prices': 0.6559347205612787, 'AFG_prices': 0.28237932492310586, 'MSFT_prices': 0.6304763466378537, 'ORCL_prices': 0.4186613511081335, 'MCD_prices': 0.33447533525196876, 'IXIC_prices': 0.4291112814352305, 'T_prices': 0.7967118688419507}, 'LAKE_prices': {'B_prices': 0.5402470085706127, 'AAPL_prices': 1.133759095191574, 'APA_prices': 0.5396263127043328, 'SUN_prices': 0.47524331386223423, 'ABT_prices': 0.5450970332885814, 'WWD_prices': 0.7128059133704486, 'AEM_prices': 0.6827448980938612, 'T_prices': 0.5721758354493929, 'UTX_prices': 0.5510197705483811, 'AFG_prices': 0.6476083088890577, 'MSFT_prices': 0.518054599005413, 'ORCL_prices': 0.5616076791746882, 'MCD_prices': 0.6282207705110039, 'IXIC_prices': 0.5344450160125465, 'CAT_prices': 0.5000371283514717}, 'APA_prices': {'B_prices': 0.7332317240900253, 'LAKE_prices': 0.7564333902738165, 'SUN_prices': 0.8107244209708342, 'ABT_prices': 0.7652134583596968, 'UTX_prices': 0.5965772805332049, 'WWD_prices': 0.6951203851929075, 'AEM_prices': 0.3814668175930752, 'T_prices': 0.8806977412815203, 'AAPL_prices': 1.0569277160193489, 'AFG_prices': 0.8533609285741802, 'MSFT_prices': 0.877404382591499, 'ORCL_prices': 0.6454948249006659, 'MCD_prices': 0.6926945379408438, 'IXIC_prices': 0.8204186340458266, 'CAT_prices': 0.5183507424627265}, 'SUN_prices': {'B_prices': 0.7842684032507079, 'LAKE_prices': 0.6156655557541445, 'APA_prices': 0.8527447041054733, 'T_prices': 0.8497944071954571, 'ABT_prices': 0.7964345758974114, 'UTX_prices': 0.7805883763062393, 'WWD_prices': 0.895998069645975, 'AEM_prices': 0.9480976518451592, 'AAPL_prices': 1.3698169067967987, 'AFG_prices': 0.8737302704158495, 'MSFT_prices': 0.8577171877015681, 'ORCL_prices': 0.88457566413319, 'MCD_prices': 0.924000625774934, 'IXIC_prices': 0.8445621760302398, 'CAT_prices': 0.8160413929492691}, 'ABT_prices': {'B_prices': 0.1920738031735914, 'LAKE_prices': 0.4829210141217749, 'APA_prices': 0.5229974322493047, 'SUN_prices': 0.5693860142072065, 'UTX_prices': 0.17221345024869822, 'WWD_prices': 0.1995847058278047, 'AEM_prices': 0.5281413764596529, 'T_prices': 0.5287373547435998, 'AAPL_prices': 0.31170646241715294, 'AFG_prices': 0.19624415893376415, 'MSFT_prices': 0.37129239289035754, 'ORCL_prices': 0.18514878109060193, 'MCD_prices': 0.1980020847277285, 'IXIC_prices': 0.28705871830614316, 'CAT_prices': 0.33053512748316216}, 'UTX_prices': {'B_prices': 0.24964148619831686, 'LAKE_prices': 0.6146143565402948, 'APA_prices': 0.5279877842313875, 'SUN_prices': 0.6664985912963449, 'ABT_prices': 0.3250588644345525, 'WWD_prices': 0.24361165923927836, 'AEM_prices': 0.5866903482564887, 'T_prices': 0.6742063043947831, 'AAPL_prices': 0.7101067756118812, 'AFG_prices': 0.3270133372852333, 'MSFT_prices': 0.6069045454926837, 'ORCL_prices': 0.3542938340521665, 'MCD_prices': 0.2694302667530142, 'IXIC_prices': 0.4675144728419482, 'CAT_prices': 0.2954444466521949}, 'WWD_prices': {'B_prices': 0.5175808100024941, 'LAKE_prices': 0.9517919956234484, 'APA_prices': 0.7775461775629778, 'SUN_prices': 1.0060951323819882, 'ABT_prices': 0.6955726558885237, 'UTX_prices': 0.5399211100876153, 'AEM_prices': 0.7697945014056576, 'T_prices': 1.1274099938978586, 'AAPL_prices': 0.49036456110287896, 'AFG_prices': 0.5058593726139732, 'MSFT_prices': 0.9227053381523211, 'ORCL_prices': 0.6339655722514972, 'MCD_prices': 0.5127000760877412, 'IXIC_prices': 0.7231049721333892, 'CAT_prices': 0.5644991239572468}, 'AEM_prices': {'B_prices': 0.8511791483950703, 'LAKE_prices': 0.8569055525463863, 'APA_prices': 0.4327883731805725, 'SUN_prices': 1.0029232640492518, 'ABT_prices': 0.8831106341969294, 'UTX_prices': 0.7261763028260703, 'WWD_prices': 0.7524181023416889, 'T_prices': 1.0327208968036998, 'AAPL_prices': 1.1675281392204566, 'AFG_prices': 0.941890440925878, 'MSFT_prices': 0.9966674343543026, 'ORCL_prices': 0.7414176564198396, 'MCD_prices': 0.7745600007660527, 'IXIC_prices': 0.9479369165236557, 'CAT_prices': 0.6531425112752605}, 'T_prices': {'B_prices': 0.17610338951832188, 'LAKE_prices': 0.21175977917425098, 'APA_prices': 0.18903981429997338, 'SUN_prices': 0.22287592298373538, 'ABT_prices': 0.2073574560364681, 'UTX_prices': 0.18454850767652597, 'WWD_prices': 0.14539664072248573, 'AEM_prices': 0.2378293473800611, 'AAPL_prices': 0.4485120732908185, 'AFG_prices': 0.19673713176028815, 'MSFT_prices': 0.18283917887195006, 'ORCL_prices': 0.1391001231419825, 'MCD_prices': 0.17137934376353092, 'IXIC_prices': 0.13522770269995588, 'CAT_prices': 0.25613667632033466}, 'AAPL_prices': {'B_prices': 1.2299648292903074, 'LAKE_prices': 1.5781808140581994, 'APA_prices': 1.4884825369549775, 'SUN_prices': 1.615407156064769, 'ABT_prices': 1.402237813761179, 'WWD_prices': 0.9089572522016122, 'AEM_prices': 1.4427887365014518, 'T_prices': 1.8687040313358332, 'UTX_prices': 1.2743570220771134, 'AFG_prices': 1.0530737012599904, 'MSFT_prices': 1.612591131823902, 'ORCL_prices': 0.9982326595085795, 'MCD_prices': 1.2315213119747912, 'IXIC_prices': 1.3683515629575775, 'CAT_prices': 1.263467823162863}, 'AFG_prices': {'B_prices': 0.34878310767070597, 'LAKE_prices': 0.7577986835124736, 'APA_prices': 0.7953135793375062, 'SUN_prices': 0.8178342744743986, 'ABT_prices': 0.5993076356351, 'WWD_prices': 0.37477438809029745, 'AEM_prices': 0.8102519101176571, 'T_prices': 0.8853818795195716, 'AAPL_prices': 0.35118764636105765, 'UTX_prices': 0.5191332098744894, 'MSFT_prices': 0.5506243928477649, 'ORCL_prices': 0.3886461738255029, 'MCD_prices': 0.49298845091566307, 'IXIC_prices': 0.5003060778726497, 'CAT_prices': 0.5598594285677257}, 'MSFT_prices': {'B_prices': 0.22215357147628978, 'LAKE_prices': 0.4297401590447073, 'APA_prices': 0.5497452773072314, 'SUN_prices': 0.5763415823281409, 'ABT_prices': 0.2534394162705707, 'UTX_prices': 0.32730844339899623, 'WWD_prices': 0.20950431189731514, 'AEM_prices': 0.5347006906561538, 'T_prices': 0.4055726338248342, 'AAPL_prices': 0.35135560763553947, 'AFG_prices': 0.18180837745381256, 'ORCL_prices': 0.2979343392503426, 'MCD_prices': 0.249623354190526, 'IXIC_prices': 0.15072695051700316, 'CAT_prices': 0.3929549756236649}, 'ORCL_prices': {'B_prices': 0.2835068043450651, 'LAKE_prices': 0.6535864302909056, 'APA_prices': 0.5844068036460358, 'SUN_prices': 0.775769731551984, 'ABT_prices': 0.23151419162712017, 'UTX_prices': 0.21935185443467317, 'WWD_prices': 0.24919862819425953, 'AEM_prices': 0.6346004726185137, 'T_prices': 0.6257521685201888, 'AAPL_prices': 0.7043149079552942, 'AFG_prices': 0.25919162150708036, 'MSFT_prices': 0.5066888264021157, 'MCD_prices': 0.17599616147980782, 'IXIC_prices': 0.28859563896257706, 'CAT_prices': 0.3334997621988891}, 'MCD_prices': {'B_prices': 0.35521607411061507, 'LAKE_prices': 0.7594942155383975, 'APA_prices': 0.6505159720449682, 'SUN_prices': 0.8998705243539272, 'ABT_prices': 0.4805920985092388, 'UTX_prices': 0.35061396684587404, 'WWD_prices': 0.21000876813679895, 'AEM_prices': 0.6581501826606224, 'T_prices': 0.8291634573843903, 'AAPL_prices': 0.4480627103366856, 'AFG_prices': 0.3316866962511656, 'MSFT_prices': 0.665251822897068, 'ORCL_prices': 0.4479717864583515, 'IXIC_prices': 0.4733964521356639, 'CAT_prices': 0.5046093710390304}, 'IXIC_prices': {'B_prices': 0.18714265984903625, 'LAKE_prices': 0.5761589410612493, 'APA_prices': 0.6401861455726069, 'SUN_prices': 0.6256722135319114, 'ABT_prices': 0.35064201918009025, 'UTX_prices': 0.25903671966955777, 'WWD_prices': 0.30176569974235323, 'AEM_prices': 0.6585564484747973, 'AAPL_prices': 0.49621656281375426, 'AFG_prices': 0.0945873599317401, 'MSFT_prices': 0.3208434422663254, 'ORCL_prices': 0.21307663591586323, 'MCD_prices': 0.25815529450022434, 'CAT_prices': 0.4001204394774099, 'T_prices': 0.5867317681491644}, 'CAT_prices': {'B_prices': 0.4364261437641697, 'LAKE_prices': 0.6220407702718704, 'APA_prices': 0.4190566474568456, 'SUN_prices': 0.7561220415485994, 'ABT_prices': 0.46420150591916437, 'UTX_prices': 0.35100538556811717, 'WWD_prices': 0.38471196688955034, 'AEM_prices': 0.538028538092671, 'AAPL_prices': 0.8566172989711986, 'AFG_prices': 0.5117732832487841, 'MSFT_prices': 0.7202849470704, 'ORCL_prices': 0.4223385256765102, 'MCD_prices': 0.3854483595610499, 'IXIC_prices': 0.5467649014363094, 'T_prices': 0.7434275136359493}})



'''





import collections
import networkx as nx
import matplotlib.pyplot as plt
from matplotlib.pyplot import plot, title, xlabel, ylabel, savefig, legend
import sys
import pandas as pd
import numpy as np
import pickle
from scipy import stats

import pygraphviz as pgv
from networkx import *
import math

QmemodelrmaePath = "/data/achivuku/PycharmProjects/financedataanalysis/qmemodelrmae.pkl"
QmemodelrmsePath = "/data/achivuku/PycharmProjects/financedataanalysis/qmemodelrmse.pkl"
QmemodelurmaePath = "/data/achivuku/PycharmProjects/financedataanalysis/qmemodelurmae.pkl"
QmemodelurmsePath = "/data/achivuku/PycharmProjects/financedataanalysis/qmemodelurmse.pkl"

QmemodelrrmsePath = "/data/achivuku/PycharmProjects/financedataanalysis/qmemodelrrmse.pkl"
QmemodelurrmsePath = "/data/achivuku/PycharmProjects/financedataanalysis/qmemodelurrmse.pkl"

QmemodelurrmsegraphPath = "/data/achivuku/PycharmProjects/financedataanalysis/qmemodelurrmsegraph.pkl"



MsemodelrmaePath = "/data/achivuku/PycharmProjects/financedataanalysis/msemodelrmae.pkl"
MsemodelrmsePath = "/data/achivuku/PycharmProjects/financedataanalysis/msemodelrmse.pkl"
MsemodelurmaePath = "/data/achivuku/PycharmProjects/financedataanalysis/msemodelurmae.pkl"
MsemodelurmsePath = "/data/achivuku/PycharmProjects/financedataanalysis/msemodelurmse.pkl"

MsemodelrrmsePath = "/data/achivuku/PycharmProjects/financedataanalysis/msemodelrrmse.pkl"
MsemodelurrmsePath = "/data/achivuku/PycharmProjects/financedataanalysis/msemodelurrmse.pkl"

MsemodelurrmsegraphPath = "/data/achivuku/PycharmProjects/financedataanalysis/msemodelurrmsegraph.pkl"

GrurnnmodelroutputPath = "/data/achivuku/PycharmProjects/financedataanalysis/grurnnmodelrrmse.pkl"
GrurnnmodeluroutputPath = "/data/achivuku/PycharmProjects/financedataanalysis/grurnnmodelurrmse.pkl"
GrurnnmodelurrmsegraphPath = "/data/achivuku/PycharmProjects/financedataanalysis/grurnnmodelurrmsegraph.pkl"



columns = ['AAPL_restricted', 'ABT_restricted', 'AEM_restricted', 'AFG_restricted', 'APA_restricted', 'B_restricted', 'CAT_restricted', 'IXIC_restricted', 'LAKE_restricted', 'MCD_restricted', 'MSFT_restricted', 'ORCL_restricted', 'SUN_restricted', 'T_restricted', 'UTX_restricted', 'WWD_restricted','AAPL_unrestricted', 'ABT_unrestricted', 'AEM_unrestricted', 'AFG_unrestricted', 'APA_unrestricted', 'B_unrestricted', 'CAT_unrestricted', 'IXIC_unrestricted', 'LAKE_unrestricted', 'MCD_unrestricted', 'MSFT_unrestricted', 'ORCL_unrestricted', 'SUN_unrestricted', 'T_unrestricted', 'UTX_unrestricted', 'WWD_unrestricted']
indexes = ['AAPL_prices', 'ABT_prices', 'AEM_prices', 'AFG_prices', 'APA_prices', 'B_prices', 'CAT_prices', 'IXIC_prices', 'LAKE_prices', 'MCD_prices', 'MSFT_prices', 'ORCL_prices', 'SUN_prices', 'T_prices', 'UTX_prices', 'WWD_prices']
nodestoremove = ['B', 'IXIC']

qmemodelrmae = collections.defaultdict(dict)
qmemodelrmse = collections.defaultdict(dict)
qmemodelurmae = collections.defaultdict(dict)
qmemodelurmse = collections.defaultdict(dict)

msemodelrmae = collections.defaultdict(dict)
msemodelrmse = collections.defaultdict(dict)
msemodelurmae = collections.defaultdict(dict)
msemodelurmse = collections.defaultdict(dict)


# with open(QmemodelrmaePath, 'rb') as handle:
#     qmemodelrmae = pickle.load(handle)
#
# with open(QmemodelrmsePath, 'rb') as handle:
#     qmemodelrmse = pickle.load(handle)
#
# with open(QmemodelrrmsePath, 'rb') as handle:
#     qmemodelrrmse = pickle.load(handle)
#
# with open(QmemodelurmaePath, 'rb') as handle:
#     qmemodelurmae = pickle.load(handle)
#
# with open(QmemodelurmsePath, 'rb') as handle:
#     qmemodelurmse = pickle.load(handle)
#
# with open(QmemodelurrmsePath, 'rb') as handle:
#     qmemodelurrmse = pickle.load(handle)
#
#
# with open(MsemodelrmaePath, 'rb') as handle:
#     msemodelrmae = pickle.load(handle)
#
# with open(MsemodelrmsePath, 'rb') as handle:
#     msemodelrmse = pickle.load(handle)
#
with open(MsemodelrrmsePath, 'rb') as handle:
    msemodelrrmse = pickle.load(handle)
#
# with open(MsemodelurmaePath, 'rb') as handle:
#     msemodelurmae = pickle.load(handle)
#
# with open(MsemodelurmsePath, 'rb') as handle:
#     msemodelurmse = pickle.load(handle)
#
with open(MsemodelurrmsePath, 'rb') as handle:
    msemodelurrmse = pickle.load(handle)


with open(GrurnnmodelroutputPath, 'rb') as handle:
    grurnnmodelrrmse = pickle.load(handle)

with open(GrurnnmodeluroutputPath, 'rb') as handle:
    grurnnmodelurrmse = pickle.load(handle)


def calculatermse(nestedd,rmsepath):
    modelrmse = collections.defaultdict(dict)

    for outerkey, outervalue in nestedd.iteritems():
        for innerkey, innervalue in nestedd[outerkey].iteritems():
            modelrmse[outerkey][innerkey] = math.sqrt(nestedd[outerkey][innerkey])

    with open(rmsepath, 'wb') as handle:
        pickle.dump(modelrmse, handle, protocol=pickle.HIGHEST_PROTOCOL)
    print("Saved",rmsepath)

df = pd.read_csv("/data/achivuku/PycharmProjects/financedataanalysis/pricesvolumes.csv")
cols = [1,2,3,4,6,8,10,12,14,16,18,20,21,22,23,24,26,28,30,32,33,34,36,38,40,42]
df.drop(df.columns[cols],axis=1,inplace=True)




# print('qmemodelrmse',qmemodelrmse)
# print('qmemodelurmse',qmemodelurmse)
# print('msemodelrmse',msemodelrmse)
# print('msemodelurmse',msemodelurmse)
# calculatermse(qmemodelrmse,QmemodelrrmsePath)
# calculatermse(qmemodelurmse,QmemodelurrmsePath)
# calculatermse(msemodelrmse,MsemodelrrmsePath)
# calculatermse(msemodelurmse,MsemodelurrmsePath)
# sys.exit()


MSEGraphPath = "/data/achivuku/PycharmProjects/financedataanalysis/MSE-Graph.png"
QMEGraphPath = "/data/achivuku/PycharmProjects/financedataanalysis/QME-Graph.png"

MSEErrorsDataframePath = "/data/achivuku/PycharmProjects/financedataanalysis/MSEErrors-Graph.pkl"
QMEErrorsDataframePath = "/data/achivuku/PycharmProjects/financedataanalysis/QMEErrors-Graph.pkl"

MSEModelFstatMAEPath = "/data/achivuku/PycharmProjects/financedataanalysis/MSECauses-Graph.pkl"
QMEModelFstatMAEPath = "/data/achivuku/PycharmProjects/financedataanalysis/QMECauses-Graph.pkl"

numdecimalplaces = 3

def calculatefstatistic(nestedrd, nestedurd, colour):

    nestedfstat = collections.defaultdict(dict)
    G = nx.DiGraph()

    dfout = pd.DataFrame(columns=columns, index=indexes)

    for outerkey, outervalue in nestedrd.iteritems():
        for innerkey, innervalue in nestedrd[outerkey].iteritems():
            restrictederror = nestedrd[outerkey][innerkey]
            unrestrictederror = nestedurd[outerkey][innerkey]

            dfout.loc[outerkey][innerkey.replace("prices", "restricted")] = restrictederror
            dfout.loc[outerkey][innerkey.replace("prices", "unrestricted")] = unrestrictederror

            fstat = (restrictederror - unrestrictederror) / unrestrictederror


            if ( fstat > 0.05 ):
            # if (fstat > 0.4):
                nestedfstat[outerkey][innerkey] = fstat
                G.add_edge(innerkey.rstrip('_prices'), outerkey.rstrip('_prices'), color=colour, weight=round(fstat,numdecimalplaces))

    # print(G.edges(data=True))
    # sys.exit()
    # innerkey is granger influencing outerkey stock
    return nestedfstat, G, dfout

def plotskewedhistogram(stocskdf,stockname,colour,htype,filename):
    for c in stocskdf.columns.tolist()[1:]:
        ts = stocskdf[[c]]
        print(ts.skew())

    ts = stocskdf[[stockname]]
    tss = ts[stockname]
    # tss = ts.diff()[stockname]
    # tss[0] = 0

    # fig, ax = plt.subplots(figsize=(10, 8))

    tssh = tss.tolist()

    plt.figure()
    n, bins, patches = plt.hist(tssh,bins=100,alpha=0.75,histtype=htype, color=colour)

    xlabel(stockname.rstrip("_prices") + ' Price')
    ylabel(stockname.rstrip("_prices") + ' Frequency')
    # plt.title(r'$\mathrm{Histogram\ of\ IQ:}\$')
    plt.grid(True)

    savefig(filename, dpi=300)

    # pyplot.hist(tssh2, bins1, alpha=0.5, color="blue", label='T')
    # width = 0.7 * (bins[1] - bins[0])
    # center = (bins[:-1] + bins[1:]) / 2
    # ax.bar(center2, hist2, align='center', width=width1,color="blue",label='T')

def savenetworkxgraph(modelgraph, nodecolour, SavePath):
    modelgraph.remove_nodes_from(nodestoremove)
    edge_labels = dict([((u, v,), d['weight'])
                        for u, v, d in modelgraph.edges(data=True)])


    plt.figure(figsize=(20,15), dpi=300, facecolor='w', edgecolor='k')
    graph_pos = nx.circular_layout(modelgraph)
    # graph_pos = nx.graphviz_layout(modelgraph, prog='neato',args='-n2')
    graph_pos = nx.circular_layout(modelgraph)

    # graph_pos = nx.circular_layout(qmemodelgraph)
    nx.draw_networkx_edge_labels(modelgraph, graph_pos, edge_labels=edge_labels, font_size=16,alpha = 0.5, width=3)
    nx.draw(modelgraph, graph_pos, node_size=5000, font_size=16, font_weight='bold', with_labels=True,
                     arrows=True, node_color=nodecolour)

    plt.tight_layout()
    plt.savefig(SavePath, format="PNG")


    from networkx.drawing.nx_agraph import to_agraph
    A = to_agraph(modelgraph)

    print(A)
    print(A.nodes())
    print(SavePath)

    # print(A.edge_attr)
    # print(A.edges(keys=True))
    sys.exit()

    # A.graph['graph'] = {'rankdir': 'TD'}
    # A.graph['node'] = {'shape': 'circle'}
    # A.graph['edges'] = {'arrowsize': '4.0'}

    A.graph_attr['rankdir'] = 'TD'
    A.graph_attr['outputorder'] = 'edgesfirst'
    # A.graph_attr['weight'] = 'true'

    A.node_attr['fontsize'] = '16'
    A.node_attr['style']='filled'
    A.node_attr['shape'] = 'circle'

    # A.edge_attr['arrowsize'] = '1.0'
    A.edge_attr['fontsize'] = '16'
    A.edge_attr['style'] = 'setlinewidth(2)'
    # A.edge_attr['weight'] = 'true'
    for u, v, d in modelgraph.edges(data=True):
        print(A.get_edge(u, v).attr['weight'])
        A.edge_attr['label'] = A.get_edge(u, v).attr['weight']
        # A.edge_attr.update(len='2.0', color='blue')
    # sys.exit()
    A.layout('dot')
    A.draw(SavePath + 'pgv.png',prog='neato',args='-n2')

# Sage or pygraphviz to plot networkx graphs.
    # Use dot language + Haskell to plot the graphs. Cannot assign edge weights in python using man pages.
        # Change weight to label in the dot file.
        # dot -n2 -Tpng undirected.gv > undirected.png
    # Install sage with all its dependencies.
    # Alternatives are TikZ, Mathematica, R Graphs Cookbook
# http://pygraphviz.github.io/documentation/pygraphviz-1.3.1/examples.html#miles
# https://pygraphviz.github.io/documentation/pygraphviz-1.3rc1/reference/agraph.html
# http://www.graphviz.org/doc/info/attrs.html
# http://www.graphviz.org/content/attrs#d:epsilon
# Dot language examples : http://digitalassets.lib.berkeley.edu/techreports/ucb/text/EECS-2013-176.pdf
# http://www.graphviz.org/Gallery.php
# http://www.graphviz.org/Documentation/dotguide.pdf
# https://mathoverflow.net/questions/55200/good-programs-for-drawing-graphs-directed-weighted-graphs
# https://archives.haskell.org/projects.haskell.org/diagrams/doc/quickstart.html#diagrams-as-a-monoid
# https://www.packtpub.com/big-data-and-business-intelligence/r-graphs-cookbook
# https://en.wikipedia.org/wiki/DOT_(graph_description_language)
# http://www.graphviz.org/doc/info/colors.html

def findtstats(l1, l2):
    ttest = stats.ttest_ind(l1, l2, equal_var=True)
    print 't-statistic independent = %6.3f testing pvalue = ' % ttest[0], "{:.2e}".format(ttest[1])



l1 = []
l2 = []

# MSE

# AAPL

# l1.append(0.452)
# l1.append(0.191)
# l1.append(0.387)
# l1.append(0.091)
# l1.append(0.185)
# l1.append(0.105)
# l1.append(0.391)
# l1.append(0.204)
# l1.append(0.103)
# l1.append(0.185)
# l1.append(0.054)
# l1.append(0.315)
# l1.append(0.209)
#
# l2.append(0.259)
# l2.append(1.053)
# l2.append(0.298)
# l2.append(0.918)
# l2.append(0.685)
# l2.append(0.984)
# l2.append(0.378)
# l2.append(0.266)
# l2.append(0.523)
# l2.append(1.180)
# l2.append(0.348)
# l2.append(0.568)
# l2.append(0.402)

# ABT

# l1.append(0.636)
# l1.append(0.204)
# l1.append(0.361)
# l1.append(0.136)
# l1.append(0.137)
# l1.append(0.094)
# l1.append(0.405)
# l1.append(0.251)
# l1.append(0.221)
# l1.append(0.203)
# l1.append(0.046)
# l1.append(0.287)
# l1.append(0.401)
#
# l2.append(1.073)
# l2.append(0.706)
# l2.append(0.447)
# l2.append(0.672)
# l2.append(0.387)
# l2.append(0.431)
# l2.append(0.391)
# l2.append(0.211)
# l2.append(0.194)
# l2.append(0.585)
# l2.append(0.183)
# l2.append(0.292)
# l2.append(0.590)


# AEM

# l1.append(0.501)
# l1.append(0.458)
# l1.append(0.372)
# l1.append(0.145)
# l1.append(0.073)
# l1.append(0.106)
# l1.append(0.363)
# l1.append(0.226)
# l1.append(0.151)
# l1.append(0.190)
# l1.append(0.114)
# l1.append(0.328)
# l1.append(0.202)

# l2.append(1.172)
# l2.append(0.439)
# l2.append(0.675)
# l2.append(0.311)
# l2.append(0.463)
# l2.append(0.576)
# l2.append(0.594)
# l2.append(0.451)
# l2.append(0.559)
# l2.append(0.793)
# l2.append(0.208)
# l2.append(0.494)
# l2.append(0.651)


# AFG

# l1.append(0.539)
# l1.append(0.487)
# l1.append(0.218)
# l1.append(0.093)
# l1.append(0.141)
# l1.append(0.132)
# l1.append(0.397)
# l1.append(0.231)
# l1.append(0.133)
# l1.append(0.171)
# l1.append(0.073)
# l1.append(0.218)
# l1.append(0.238)
#
# l2.append(0.842)
# l2.append(0.161)
# l2.append(0.784)
# l2.append(0.756)
# l2.append(0.436)
# l2.append(0.548)
# l2.append(0.275)
# l2.append(0.146)
# l2.append(0.222)
# l2.append(0.700)
# l2.append(0.172)
# l2.append(0.296)
# l2.append(0.437)


# APA

# l1.append(0.475)
# l1.append(0.437)
# l1.append(0.169)
# l1.append(0.409)
# l1.append(0.056)
# l1.append(0.094)
# l1.append(0.341)
# l1.append(0.251)
# l1.append(0.164)
# l1.append(0.211)
# l1.append(0.065)
# l1.append(0.250)
# l1.append(0.148)
#
# l2.append(1.154)
# l2.append(0.439)
# l2.append(0.354)
# l2.append(0.614)
# l2.append(0.348)
# l2.append(0.478)
# l2.append(0.521)
# l2.append(0.431)
# l2.append(0.498)
# l2.append(0.684)
# l2.append(0.162)
# l2.append(0.420)
# l2.append(0.587)


# CAT

# l1.append(0.303)
# l1.append(0.412)
# l1.append(0.105)
# l1.append(0.351)
# l1.append(0.111)
# l1.append(0.121)
# l1.append(0.329)
# l1.append(0.218)
# l1.append(0.152)
# l1.append(0.153)
# l1.append(0.051)
# l1.append(0.258)
# l1.append(0.364)
#
# l2.append(0.941)
# l2.append(0.257)
# l2.append(0.526)
# l2.append(0.413)
# l2.append(0.421)
# l2.append(0.413)
# l2.append(0.406)
# l2.append(0.275)
# l2.append(0.275)
# l2.append(0.621)
# l2.append(0.194)
# l2.append(0.230)
# l2.append(0.421)


# LAKE

# l1.append(0.612)
# l1.append(0.383)
# l1.append(0.201)
# l1.append(0.451)
# l1.append(0.101)
# l1.append(0.138)
# l1.append(0.423)
# l1.append(0.235)
# l1.append(0.205)
# l1.append(0.185)
# l1.append(0.036)
# l1.append(0.254)
# l1.append(0.241)
#
# l2.append(1.311)
# l2.append(0.384)
# l2.append(0.717)
# l2.append(0.607)
# l2.append(0.631)
# l2.append(0.511)
# l2.append(0.669)
# l2.append(0.328)
# l2.append(0.561)
# l2.append(0.499)
# l2.append(0.166)
# l2.append(0.510)
# l2.append(0.813)

# MCD

# l1.append(0.446)
# l1.append(0.452)
# l1.append(0.166)
# l1.append(0.483)
# l1.append(0.079)
# l1.append(0.112)
# l1.append(0.088)
# l1.append(0.233)
# l1.append(0.209)
# l1.append(0.152)
# l1.append(0.054)
# l1.append(0.307)
# l1.append(0.280)
#
# l2.append(0.885)
# l2.append(0.151)
# l2.append(0.652)
# l2.append(0.355)
# l2.append(0.588)
# l2.append(0.319)
# l2.append(0.505)
# l2.append(0.196)
# l2.append(0.139)
# l2.append(0.714)
# l2.append(0.137)
# l2.append(0.221)
# l2.append(0.427)

# MSFT

# l1.append(0.548)
# l1.append(0.464)
# l1.append(0.191)
# l1.append(0.315)
# l1.append(0.076)
# l1.append(0.135)
# l1.append(0.137)
# l1.append(0.402)
# l1.append(0.175)
# l1.append(0.196)
# l1.append(0.067)
# l1.append(0.360)
# l1.append(0.218)
#
# l2.append(1.268)
# l2.append(0.313)
# l2.append(0.791)
# l2.append(0.427)
# l2.append(0.772)
# l2.append(0.647)
# l2.append(0.399)
# l2.append(0.585)
# l2.append(0.433)
# l2.append(0.697)
# l2.append(0.148)
# l2.append(0.564)
# l2.append(0.834)


# ORCL

# l1.append(0.455)
# l1.append(0.434)
# l1.append(0.292)
# l1.append(0.441)
# l1.append(0.083)
# l1.append(0.111)
# l1.append(0.109)
# l1.append(0.386)
# l1.append(0.282)
# l1.append(0.222)
# l1.append(0.066)
# l1.append(0.291)
# l1.append(0.252)
#
# l2.append(0.723)
# l2.append(0.151)
# l2.append(0.618)
# l2.append(0.273)
# l2.append(0.572)
# l2.append(0.361)
# l2.append(0.439)
# l2.append(0.377)
# l2.append(0.201)
# l2.append(0.660)
# l2.append(0.117)
# l2.append(0.326)
# l2.append(0.534)


# SUN

# l1.append(0.571)
# l1.append(0.458)
# l1.append(0.185)
# l1.append(0.432)
# l1.append(0.081)
# l1.append(0.058)
# l1.append(0.105)
# l1.append(0.525)
# l1.append(0.200)
# l1.append(0.149)
# l1.append(0.063)
# l1.append(0.304)
# l1.append(0.340)
#
# l2.append(1.396)
# l2.append(0.431)
# l2.append(0.835)
# l2.append(0.649)
# l2.append(0.663)
# l2.append(0.604)
# l2.append(0.403)
# l2.append(0.758)
# l2.append(0.438)
# l2.append(0.664)
# l2.append(0.175)
# l2.append(0.593)
# l2.append(0.878)

# T

# l1.append(0.603)
# l1.append(0.441)
# l1.append(0.217)
# l1.append(0.344)
# l1.append(0.095)
# l1.append(0.066)
# l1.append(0.088)
# l1.append(0.395)
# l1.append(0.241)
# l1.append(0.133)
# l1.append(0.152)
# l1.append(0.301)
# l1.append(0.336)
#
# l2.append(1.451)
# l2.append(0.428)
# l2.append(0.887)
# l2.append(0.679)
# l2.append(0.781)
# l2.append(0.679)
# l2.append(0.462)
# l2.append(0.697)
# l2.append(0.258)
# l2.append(0.508)
# l2.append(0.694)
# l2.append(0.601)
# l2.append(0.981)


# UTX

# l1.append(0.533)
# l1.append(0.444)
# l1.append(0.231)
# l1.append(0.443)
# l1.append(0.071)
# l1.append(0.057)
# l1.append(0.107)
# l1.append(0.378)
# l1.append(0.225)
# l1.append(0.119)
# l1.append(0.177)
# l1.append(0.094)
# l1.append(0.243)
#
# l2.append(0.953)
# l2.append(0.141)
# l2.append(0.604)
# l2.append(0.331)
# l2.append(0.521)
# l2.append(0.282)
# l2.append(0.438)
# l2.append(0.276)
# l2.append(0.205)
# l2.append(0.188)
# l2.append(0.600)
# l2.append(0.147)
# l2.append(0.426)


# WWD

# l1.append(0.518)
# l1.append(0.436)
# l1.append(0.138)
# l1.append(0.373)
# l1.append(0.091)
# l1.append(0.058)
# l1.append(0.114)
# l1.append(0.448)
# l1.append(0.211)
# l1.append(0.103)
# l1.append(0.180)
# l1.append(0.053)
# l1.append(0.252)
#
# l2.append(0.712)
# l2.append(0.163)
# l2.append(0.664)
# l2.append(0.295)
# l2.append(0.569)
# l2.append(0.331)
# l2.append(0.582)
# l2.append(0.172)
# l2.append(0.159)
# l2.append(0.184)
# l2.append(0.681)
# l2.append(0.121)
# l2.append(0.206)



# QME

# AAPL

# l1.append(0.476)
# l1.append(0.116)
# l1.append(0.607)
# l1.append(0.101)
# l1.append(0.319)
# l1.append(0.122)
# l1.append(0.305)
# l1.append(0.177)
# l1.append(0.201)
# l1.append(0.179)
# l1.append(0.071)
# l1.append(0.296)
# l1.append(0.283)
#
# l2.append(0.196)
# l2.append(0.827)
# l2.append(0.265)
# l2.append(0.768)
# l2.append(0.475)
# l2.append(0.601)
# l2.append(0.289)
# l2.append(0.183)
# l2.append(0.217)
# l2.append(1.058)
# l2.append(0.301)
# l2.append(0.351)
# l2.append(0.304)

# l1.append(0.196)
# l1.append(0.827)
# l1.append(0.265)
# l1.append(0.768)
# l1.append(0.475)
# l1.append(0.601)
# l1.append(0.289)
# l1.append(0.183)
# l1.append(0.217)
# l1.append(1.058)
# l1.append(0.301)
# l1.append(0.351)
# l1.append(0.304)


# ABT

# l1.append(0.517)
# l1.append(0.199)
# l1.append(0.468)
# l1.append(0.092)
# l1.append(0.261)
# l1.append(0.131)
# l1.append(0.321)
# l1.append(0.206)
# l1.append(0.553)
# l1.append(0.193)
# l1.append(0.075)
# l1.append(0.294)
# l1.append(0.345)
#
# l2.append(0.957)
# l2.append(0.814)
# l2.append(0.431)
# l2.append(0.681)
# l2.append(0.489)
# l2.append(0.435)
# l2.append(0.521)
# l2.append(0.203)
# l2.append(0.274)
# l2.append(0.572)
# l2.append(0.201)
# l2.append(0.556)
# l2.append(0.661)

# l1.append(0.957)
# l1.append(0.814)
# l1.append(0.431)
# l1.append(0.681)
# l1.append(0.489)
# l1.append(0.435)
# l1.append(0.521)
# l1.append(0.203)
# l1.append(0.274)
# l1.append(0.572)
# l1.append(0.201)
# l1.append(0.556)
# l1.append(0.661)



# AEM

# l1.append(0.324)
# l1.append(0.515)
# l1.append(0.497)
# l1.append(0.128)
# l1.append(0.474)
# l1.append(0.222)
# l1.append(0.486)
# l1.append(0.141)
# l1.append(0.533)
# l1.append(0.174)
# l1.append(0.087)
# l1.append(0.396)
# l1.append(0.418)

# l2.append(1.145)
# l2.append(0.401)
# l2.append(0.626)
# l2.append(0.383)
# l2.append(0.441)
# l2.append(0.438)
# l2.append(0.516)
# l2.append(0.399)
# l2.append(0.476)
# l2.append(0.826)
# l2.append(0.137)
# l2.append(0.441)
# l2.append(0.618)

# l1.append(1.145)
# l1.append(0.401)
# l1.append(0.626)
# l1.append(0.383)
# l1.append(0.441)
# l1.append(0.438)
# l1.append(0.516)
# l1.append(0.399)
# l1.append(0.476)
# l1.append(0.826)
# l1.append(0.137)
# l1.append(0.441)
# l1.append(0.618)



# AFG

# l1.append(0.522)
# l1.append(0.489)
# l1.append(0.167)
# l1.append(0.133)
# l1.append(0.251)
# l1.append(0.114)
# l1.append(0.379)
# l1.append(0.146)
# l1.append(0.349)
# l1.append(0.308)
# l1.append(0.101)
# l1.append(0.335)
# l1.append(0.502)
#
# l2.append(0.900)
# l2.append(0.222)
# l2.append(0.763)
# l2.append(0.726)
# l2.append(0.434)
# l2.append(0.464)
# l2.append(0.461)
# l2.append(0.181)
# l2.append(0.269)
# l2.append(0.726)
# l2.append(0.191)
# l2.append(0.609)
# l2.append(0.556)

# l1.append(0.900)
# l1.append(0.222)
# l1.append(0.763)
# l1.append(0.726)
# l1.append(0.434)
# l1.append(0.464)
# l1.append(0.461)
# l1.append(0.181)
# l1.append(0.269)
# l1.append(0.726)
# l1.append(0.191)
# l1.append(0.609)
# l1.append(0.556)



# APA

# l1.append(0.607)
# l1.append(0.511)
# l1.append(0.165)
# l1.append(0.521)
# l1.append(0.194)
# l1.append(0.111)
# l1.append(0.418)
# l1.append(0.134)
# l1.append(0.349)
# l1.append(0.166)
# l1.append(0.055)
# l1.append(0.361)
# l1.append(0.312)
#
# l2.append(1.149)
# l2.append(0.366)
# l2.append(0.605)
# l2.append(0.571)
# l2.append(0.443)
# l2.append(0.409)
# l2.append(0.497)
# l2.append(0.346)
# l2.append(0.446)
# l2.append(0.657)
# l2.append(0.198)
# l2.append(0.381)
# l2.append(0.586)

# l1.append(1.149)
# l1.append(0.366)
# l1.append(0.605)
# l1.append(0.571)
# l1.append(0.443)
# l1.append(0.409)
# l1.append(0.497)
# l1.append(0.346)
# l1.append(0.446)
# l1.append(0.657)
# l1.append(0.198)
# l1.append(0.381)
# l1.append(0.586)


# CAT

# l1.append(0.463)
# l1.append(0.476)
# l1.append(0.118)
# l1.append(0.495)
# l1.append(0.135)
# l1.append(0.133)
# l1.append(0.425)
# l1.append(0.123)
# l1.append(0.454)
# l1.append(0.171)
# l1.append(0.083)
# l1.append(0.449)
# l1.append(0.264)
#
# l2.append(0.978)
# l2.append(0.255)
# l2.append(0.564)
# l2.append(0.397)
# l2.append(0.481)
# l2.append(0.401)
# l2.append(0.475)
# l2.append(0.276)
# l2.append(0.315)
# l2.append(0.609)
# l2.append(0.215)
# l2.append(0.391)
# l2.append(0.551)

# l1.append(0.978)
# l1.append(0.255)
# l1.append(0.564)
# l1.append(0.397)
# l1.append(0.481)
# l1.append(0.401)
# l1.append(0.475)
# l1.append(0.276)
# l1.append(0.315)
# l1.append(0.609)
# l1.append(0.215)
# l1.append(0.391)
# l1.append(0.551)



# LAKE

# l1.append(0.588)
# l1.append(0.548)
# l1.append(0.114)
# l1.append(0.472)
# l1.append(0.111)
# l1.append(0.226)
# l1.append(0.412)
# l1.append(0.151)
# l1.append(0.364)
# l1.append(0.185)
# l1.append(0.039)
# l1.append(0.446)
# l1.append(0.458)
#
# l2.append(1.283)
# l2.append(0.406)
# l2.append(0.685)
# l2.append(0.597)
# l2.append(0.639)
# l2.append(0.528)
# l2.append(0.654)
# l2.append(0.317)
# l2.append(0.557)
# l2.append(0.532)
# l2.append(0.151)
# l2.append(0.577)
# l2.append(0.838)

# l1.append(1.283)
# l1.append(0.406)
# l1.append(0.685)
# l1.append(0.597)
# l1.append(0.639)
# l1.append(0.528)
# l1.append(0.654)
# l1.append(0.317)
# l1.append(0.557)
# l1.append(0.532)
# l1.append(0.151)
# l1.append(0.577)
# l1.append(0.838)


# MCD

# l1.append(0.730)
# l1.append(0.494)
# l1.append(0.204)
# l1.append(0.591)
# l1.append(0.143)
# l1.append(0.287)
# l1.append(0.113)
# l1.append(0.195)
# l1.append(0.476)
# l1.append(0.181)
# l1.append(0.062)
# l1.append(0.195)
# l1.append(0.233)
#
# l2.append(0.784)
# l2.append(0.341)
# l2.append(0.621)
# l2.append(0.319)
# l2.append(0.574)
# l2.append(0.374)
# l2.append(0.426)
# l2.append(0.219)
# l2.append(0.191)
# l2.append(0.812)
# l2.append(0.223)
# l2.append(0.376)
# l2.append(0.604)

# l1.append(0.784)
# l1.append(0.341)
# l1.append(0.621)
# l1.append(0.319)
# l1.append(0.574)
# l1.append(0.374)
# l1.append(0.426)
# l1.append(0.219)
# l1.append(0.191)
# l1.append(0.812)
# l1.append(0.223)
# l1.append(0.376)
# l1.append(0.604)



# MSFT

# l1.append(0.719)
# l1.append(0.503)
# l1.append(0.178)
# l1.append(0.538)
# l1.append(0.119)
# l1.append(0.306)
# l1.append(0.115)
# l1.append(0.365)
# l1.append(0.404)
# l1.append(0.168)
# l1.append(0.038)
# l1.append(0.319)
# l1.append(0.408)
#
# l2.append(1.323)
# l2.append(0.309)
# l2.append(0.819)
# l2.append(0.582)
# l2.append(0.867)
# l2.append(0.716)
# l2.append(0.478)
# l2.append(0.606)
# l2.append(0.403)
# l2.append(0.722)
# l2.append(0.111)
# l2.append(0.634)
# l2.append(1.022)

# l1.append(1.323)
# l1.append(0.309)
# l1.append(0.819)
# l1.append(0.582)
# l1.append(0.867)
# l1.append(0.716)
# l1.append(0.478)
# l1.append(0.606)
# l1.append(0.403)
# l1.append(0.722)
# l1.append(0.111)
# l1.append(0.634)
# l1.append(1.022)


# ORCL

# l1.append(0.662)
# l1.append(0.497)
# l1.append(0.112)
# l1.append(0.486)
# l1.append(0.111)
# l1.append(0.201)
# l1.append(0.119)
# l1.append(0.453)
# l1.append(0.117)
# l1.append(0.178)
# l1.append(0.063)
# l1.append(0.311)
# l1.append(0.411)
#
# l2.append(0.857)
# l2.append(0.249)
# l2.append(0.631)
# l2.append(0.335)
# l2.append(0.591)
# l2.append(0.429)
# l2.append(0.409)
# l2.append(0.205)
# l2.append(0.222)
# l2.append(0.631)
# l2.append(0.151)
# l2.append(0.317)
# l2.append(0.501)

# l1.append(0.857)
# l1.append(0.249)
# l1.append(0.631)
# l1.append(0.335)
# l1.append(0.591)
# l1.append(0.429)
# l1.append(0.409)
# l1.append(0.205)
# l1.append(0.222)
# l1.append(0.631)
# l1.append(0.151)
# l1.append(0.317)
# l1.append(0.501)


# SUN

# l1.append(0.615)
# l1.append(0.473)
# l1.append(0.128)
# l1.append(0.535)
# l1.append(0.128)
# l1.append(0.363)
# l1.append(0.117)
# l1.append(0.519)
# l1.append(0.129)
# l1.append(0.311)
# l1.append(0.089)
# l1.append(0.266)
# l1.append(0.301)
#
# l2.append(1.368)
# l2.append(0.433)
# l2.append(0.782)
# l2.append(0.657)
# l2.append(0.632)
# l2.append(0.555)
# l2.append(0.324)
# l2.append(0.731)
# l2.append(0.351)
# l2.append(0.607)
# l2.append(0.178)
# l2.append(0.566)
# l2.append(0.866)

# l1.append(1.368)
# l1.append(0.433)
# l1.append(0.782)
# l1.append(0.657)
# l1.append(0.632)
# l1.append(0.555)
# l1.append(0.324)
# l1.append(0.731)
# l1.append(0.351)
# l1.append(0.607)
# l1.append(0.178)
# l1.append(0.566)
# l1.append(0.866)


# T

# l1.append(0.624)
# l1.append(0.535)
# l1.append(0.129)
# l1.append(0.562)
# l1.append(0.141)
# l1.append(0.291)
# l1.append(0.115)
# l1.append(0.515)
# l1.append(0.126)
# l1.append(0.371)
# l1.append(0.189)
# l1.append(0.399)
# l1.append(0.268)
#
# l2.append(1.409)
# l2.append(0.351)
# l2.append(1.031)
# l2.append(0.579)
# l2.append(0.821)
# l2.append(0.756)
# l2.append(0.459)
# l2.append(0.621)
# l2.append(0.269)
# l2.append(0.593)
# l2.append(0.671)
# l2.append(0.619)
# l2.append(0.969)

# l1.append(1.409)
# l1.append(0.351)
# l1.append(1.031)
# l1.append(0.579)
# l1.append(0.821)
# l1.append(0.756)
# l1.append(0.459)
# l1.append(0.621)
# l1.append(0.269)
# l1.append(0.593)
# l1.append(0.671)
# l1.append(0.619)
# l1.append(0.969)


# UTX

# l1.append(0.473)
# l1.append(0.515)
# l1.append(0.138)
# l1.append(0.546)
# l1.append(0.112)
# l1.append(0.231)
# l1.append(0.116)
# l1.append(0.554)
# l1.append(0.111)
# l1.append(0.273)
# l1.append(0.188)
# l1.append(0.041)
# l1.append(0.451)
#
# l2.append(1.013)
# l2.append(0.211)
# l2.append(0.622)
# l2.append(0.345)
# l2.append(0.559)
# l2.append(0.391)
# l2.append(0.389)
# l2.append(0.381)
# l2.append(0.237)
# l2.append(0.272)
# l2.append(0.628)
# l2.append(0.226)
# l2.append(0.521)

# l1.append(1.013)
# l1.append(0.211)
# l1.append(0.622)
# l1.append(0.345)
# l1.append(0.559)
# l1.append(0.391)
# l1.append(0.389)
# l1.append(0.381)
# l1.append(0.237)
# l1.append(0.272)
# l1.append(0.628)
# l1.append(0.226)
# l1.append(0.521)



# WWD

# l1.append(0.584)
# l1.append(0.468)
# l1.append(0.116)
# l1.append(0.676)
# l1.append(0.105)
# l1.append(0.345)
# l1.append(0.143)
# l1.append(0.263)
# l1.append(0.132)
# l1.append(0.566)
# l1.append(0.206)
# l1.append(0.161)
# l1.append(0.234)
#
# l2.append(0.773)
# l2.append(0.224)
# l2.append(0.614)
# l2.append(0.286)
# l2.append(0.584)
# l2.append(0.321)
# l2.append(0.405)
# l2.append(0.255)
# l2.append(0.157)
# l2.append(0.237)
# l2.append(0.711)
# l2.append(0.131)
# l2.append(0.224)

# l1.append(0.773)
# l1.append(0.224)
# l1.append(0.614)
# l1.append(0.286)
# l1.append(0.584)
# l1.append(0.321)
# l1.append(0.405)
# l1.append(0.255)
# l1.append(0.157)
# l1.append(0.237)
# l1.append(0.711)
# l1.append(0.131)
# l1.append(0.224)



# MSE effects

# AAPL

# l1.append(0.636)
# l1.append(0.501)
# l1.append(0.539)
# l1.append(0.475)
# l1.append(0.303)
# l1.append(0.612)
# l1.append(0.446)
# l1.append(0.548)
# l1.append(0.455)
# l1.append(0.571)
# l1.append(0.603)
# l1.append(0.533)
# l1.append(0.518)
#
# l2.append(1.073)
# l2.append(1.172)
# l2.append(0.842)
# l2.append(1.154)
# l2.append(0.941)
# l2.append(1.311)
# l2.append(0.885)
# l2.append(1.268)
# l2.append(0.723)
# l2.append(1.396)
# l2.append(1.451)
# l2.append(0.953)
# l2.append(0.712)

# ABT

# l1.append(0.452)
# l1.append(0.458)
# l1.append(0.487)
# l1.append(0.437)
# l1.append(0.412)
# l1.append(0.383)
# l1.append(0.452)
# l1.append(0.464)
# l1.append(0.434)
# l1.append(0.458)
# l1.append(0.441)
# l1.append(0.444)
# l1.append(0.436)
#
# l2.append(0.259)
# l2.append(0.439)
# l2.append(0.161)
# l2.append(0.439)
# l2.append(0.257)
# l2.append(0.384)
# l2.append(0.151)
# l2.append(0.313)
# l2.append(0.151)
# l2.append(0.431)
# l2.append(0.428)
# l2.append(0.141)
# l2.append(0.163)


# AEM

# l1.append(0.191)
# l1.append(0.204)
# l1.append(0.218)
# l1.append(0.169)
# l1.append(0.105)
# l1.append(0.201)
# l1.append(0.166)
# l1.append(0.191)
# l1.append(0.292)
# l1.append(0.185)
# l1.append(0.217)
# l1.append(0.231)
# l1.append(0.138)
#
# l2.append(1.053)
# l2.append(0.706)
# l2.append(0.784)
# l2.append(0.354)
# l2.append(0.526)
# l2.append(0.717)
# l2.append(0.652)
# l2.append(0.791)
# l2.append(0.618)
# l2.append(0.835)
# l2.append(0.887)
# l2.append(0.604)
# l2.append(0.664)

# AFG

# l1.append(0.387)
# l1.append(0.361)
# l1.append(0.372)
# l1.append(0.409)
# l1.append(0.351)
# l1.append(0.451)
# l1.append(0.483)
# l1.append(0.315)
# l1.append(0.441)
# l1.append(0.432)
# l1.append(0.344)
# l1.append(0.443)
# l1.append(0.373)
#
# l2.append(0.298)
# l2.append(0.447)
# l2.append(0.675)
# l2.append(0.614)
# l2.append(0.413)
# l2.append(0.607)
# l2.append(0.355)
# l2.append(0.427)
# l2.append(0.273)
# l2.append(0.649)
# l2.append(0.679)
# l2.append(0.331)
# l2.append(0.295)

# APA

# l1.append(0.091)
# l1.append(0.136)
# l1.append(0.145)
# l1.append(0.093)
# l1.append(0.111)
# l1.append(0.101)
# l1.append(0.079)
# l1.append(0.076)
# l1.append(0.083)
# l1.append(0.081)
# l1.append(0.095)
# l1.append(0.071)
# l1.append(0.091)

# l2.append(0.918)
# l2.append(0.672)
# l2.append(0.311)
# l2.append(0.756)
# l2.append(0.421)
# l2.append(0.631)
# l2.append(0.588)
# l2.append(0.772)
# l2.append(0.572)
# l2.append(0.663)
# l2.append(0.781)
# l2.append(0.521)
# l2.append(0.569)

# CAT

# l1.append(0.185)
# l1.append(0.137)
# l1.append(0.073)
# l1.append(0.141)
# l1.append(0.056)
# l1.append(0.138)
# l1.append(0.112)
# l1.append(0.135)
# l1.append(0.111)
# l1.append(0.058)
# l1.append(0.066)
# l1.append(0.057)
# l1.append(0.058)
#
# l2.append(0.685)
# l2.append(0.387)
# l2.append(0.463)
# l2.append(0.436)
# l2.append(0.348)
# l2.append(0.511)
# l2.append(0.319)
# l2.append(0.647)
# l2.append(0.361)
# l2.append(0.604)
# l2.append(0.679)
# l2.append(0.282)
# l2.append(0.331)

# LAKE

# l1.append(0.105)
# l1.append(0.094)
# l1.append(0.106)
# l1.append(0.132)
# l1.append(0.094)
# l1.append(0.121)
# l1.append(0.088)
# l1.append(0.137)
# l1.append(0.109)
# l1.append(0.105)
# l1.append(0.088)
# l1.append(0.107)
# l1.append(0.114)
#
# l2.append(0.984)
# l2.append(0.431)
# l2.append(0.576)
# l2.append(0.548)
# l2.append(0.478)
# l2.append(0.413)
# l2.append(0.505)
# l2.append(0.399)
# l2.append(0.439)
# l2.append(0.403)
# l2.append(0.462)
# l2.append(0.438)
# l2.append(0.582)

# MCD

# l1.append(0.391)
# l1.append(0.405)
# l1.append(0.363)
# l1.append(0.397)
# l1.append(0.341)
# l1.append(0.329)
# l1.append(0.423)
# l1.append(0.402)
# l1.append(0.386)
# l1.append(0.525)
# l1.append(0.395)
# l1.append(0.378)
# l1.append(0.448)
#
# l2.append(0.378)
# l2.append(0.391)
# l2.append(0.594)
# l2.append(0.275)
# l2.append(0.521)
# l2.append(0.406)
# l2.append(0.669)
# l2.append(0.585)
# l2.append(0.377)
# l2.append(0.758)
# l2.append(0.697)
# l2.append(0.276)
# l2.append(0.172)


# MSFT

# l1.append(0.204)
# l1.append(0.251)
# l1.append(0.226)
# l1.append(0.231)
# l1.append(0.251)
# l1.append(0.218)
# l1.append(0.235)
# l1.append(0.233)
# l1.append(0.282)
# l1.append(0.200)
# l1.append(0.241)
# l1.append(0.225)
# l1.append(0.211)
#
# l2.append(0.266)
# l2.append(0.211)
# l2.append(0.451)
# l2.append(0.146)
# l2.append(0.431)
# l2.append(0.275)
# l2.append(0.328)
# l2.append(0.196)
# l2.append(0.201)
# l2.append(0.438)
# l2.append(0.258)
# l2.append(0.205)
# l2.append(0.159)

# ORCL

# l1.append(0.103)
# l1.append(0.221)
# l1.append(0.151)
# l1.append(0.133)
# l1.append(0.164)
# l1.append(0.152)
# l1.append(0.205)
# l1.append(0.209)
# l1.append(0.175)
# l1.append(0.149)
# l1.append(0.133)
# l1.append(0.119)
# l1.append(0.103)
#
# l2.append(0.523)
# l2.append(0.194)
# l2.append(0.559)
# l2.append(0.222)
# l2.append(0.498)
# l2.append(0.275)
# l2.append(0.561)
# l2.append(0.139)
# l2.append(0.433)
# l2.append(0.664)
# l2.append(0.508)
# l2.append(0.188)
# l2.append(0.184)

# SUN

# l1.append(0.185)
# l1.append(0.203)
# l1.append(0.190)
# l1.append(0.171)
# l1.append(0.211)
# l1.append(0.153)
# l1.append(0.185)
# l1.append(0.152)
# l1.append(0.196)
# l1.append(0.222)
# l1.append(0.152)
# l1.append(0.177)
# l1.append(0.180)
#
# l2.append(1.180)
# l2.append(0.585)
# l2.append(0.793)
# l2.append(0.700)
# l2.append(0.684)
# l2.append(0.621)
# l2.append(0.499)
# l2.append(0.714)
# l2.append(0.697)
# l2.append(0.660)
# l2.append(0.694)
# l2.append(0.600)
# l2.append(0.681)

# T

# l1.append(0.054)
# l1.append(0.046)
# l1.append(0.114)
# l1.append(0.073)
# l1.append(0.065)
# l1.append(0.051)
# l1.append(0.036)
# l1.append(0.054)
# l1.append(0.067)
# l1.append(0.066)
# l1.append(0.063)
# l1.append(0.094)
# l1.append(0.053)
#
# l2.append(0.348)
# l2.append(0.183)
# l2.append(0.208)
# l2.append(0.172)
# l2.append(0.162)
# l2.append(0.194)
# l2.append(0.166)
# l2.append(0.137)
# l2.append(0.148)
# l2.append(0.117)
# l2.append(0.175)
# l2.append(0.147)
# l2.append(0.121)

# UTX

# l1.append(0.315)
# l1.append(0.287)
# l1.append(0.328)
# l1.append(0.218)
# l1.append(0.250)
# l1.append(0.258)
# l1.append(0.254)
# l1.append(0.307)
# l1.append(0.360)
# l1.append(0.291)
# l1.append(0.304)
# l1.append(0.301)
# l1.append(0.252)
#
# l2.append(0.568)
# l2.append(0.292)
# l2.append(0.494)
# l2.append(0.296)
# l2.append(0.420)
# l2.append(0.230)
# l2.append(0.510)
# l2.append(0.221)
# l2.append(0.564)
# l2.append(0.326)
# l2.append(0.593)
# l2.append(0.601)
# l2.append(0.206)

# WWD

# l1.append(0.209)
# l1.append(0.401)
# l1.append(0.202)
# l1.append(0.238)
# l1.append(0.148)
# l1.append(0.364)
# l1.append(0.241)
# l1.append(0.280)
# l1.append(0.218)
# l1.append(0.252)
# l1.append(0.340)
# l1.append(0.336)
# l1.append(0.243)
#
# l2.append(0.402)
# l2.append(0.590)
# l2.append(0.651)
# l2.append(0.437)
# l2.append(0.587)
# l2.append(0.421)
# l2.append(0.813)
# l2.append(0.427)
# l2.append(0.834)
# l2.append(0.534)
# l2.append(0.878)
# l2.append(0.981)
# l2.append(0.426)


# QME Effects

# AAPL

# l1.append(0.957)
# l1.append(1.145)
# l1.append(0.900)
# l1.append(1.149)
# l1.append(0.978)
# l1.append(1.283)
# l1.append(0.784)
# l1.append(1.323)
# l1.append(0.857)
# l1.append(1.368)
# l1.append(1.409)
# l1.append(1.013)
# l1.append(0.773)
#
# l2.append(0.517)
# l2.append(0.324)
# l2.append(0.522)
# l2.append(0.607)
# l2.append(0.463)
# l2.append(0.588)
# l2.append(0.730)
# l2.append(0.719)
# l2.append(0.662)
# l2.append(0.615)
# l2.append(0.624)
# l2.append(0.473)
# l2.append(0.584)

# l1.append(0.517)
# l1.append(0.324)
# l1.append(0.522)
# l1.append(0.607)
# l1.append(0.463)
# l1.append(0.588)
# l1.append(0.730)
# l1.append(0.719)
# l1.append(0.662)
# l1.append(0.615)
# l1.append(0.624)
# l1.append(0.473)
# l1.append(0.584)

# ABT

# l1.append(0.196)
# l1.append(0.401)
# l1.append(0.222)
# l1.append(0.366)
# l1.append(0.255)
# l1.append(0.406)
# l1.append(0.341)
# l1.append(0.309)
# l1.append(0.249)
# l1.append(0.433)
# l1.append(0.351)
# l1.append(0.211)
# l1.append(0.224)
#
# l2.append(0.476)
# l2.append(0.515)
# l2.append(0.489)
# l2.append(0.511)
# l2.append(0.476)
# l2.append(0.548)
# l2.append(0.494)
# l2.append(0.503)
# l2.append(0.497)
# l2.append(0.473)
# l2.append(0.535)
# l2.append(0.515)
# l2.append(0.468)

# l1.append(0.476)
# l1.append(0.515)
# l1.append(0.489)
# l1.append(0.511)
# l1.append(0.476)
# l1.append(0.548)
# l1.append(0.494)
# l1.append(0.503)
# l1.append(0.497)
# l1.append(0.473)
# l1.append(0.535)
# l1.append(0.515)
# l1.append(0.468)

# AEM

# l1.append(0.827)
# l1.append(0.814)
# l1.append(0.763)
# l1.append(0.605)
# l1.append(0.564)
# l1.append(0.685)
# l1.append(0.621)
# l1.append(0.819)
# l1.append(0.631)
# l1.append(0.782)
# l1.append(1.031)
# l1.append(0.622)
# l1.append(0.614)
#
# l2.append(0.116)
# l2.append(0.199)
# l2.append(0.167)
# l2.append(0.165)
# l2.append(0.118)
# l2.append(0.114)
# l2.append(0.204)
# l2.append(0.178)
# l2.append(0.112)
# l2.append(0.128)
# l2.append(0.129)
# l2.append(0.138)
# l2.append(0.116)

# l1.append(0.116)
# l1.append(0.199)
# l1.append(0.167)
# l1.append(0.165)
# l1.append(0.118)
# l1.append(0.114)
# l1.append(0.204)
# l1.append(0.178)
# l1.append(0.112)
# l1.append(0.128)
# l1.append(0.129)
# l1.append(0.138)
# l1.append(0.116)

# AFG

# l1.append(0.265)
# l1.append(0.431)
# l1.append(0.626)
# l1.append(0.571)
# l1.append(0.397)
# l1.append(0.597)
# l1.append(0.319)
# l1.append(0.582)
# l1.append(0.335)
# l1.append(0.657)
# l1.append(0.579)
# l1.append(0.345)
# l1.append(0.286)
#
# l2.append(0.607)
# l2.append(0.468)
# l2.append(0.497)
# l2.append(0.521)
# l2.append(0.495)
# l2.append(0.472)
# l2.append(0.591)
# l2.append(0.538)
# l2.append(0.486)
# l2.append(0.535)
# l2.append(0.562)
# l2.append(0.546)
# l2.append(0.676)

# l1.append(0.607)
# l1.append(0.468)
# l1.append(0.497)
# l1.append(0.521)
# l1.append(0.495)
# l1.append(0.472)
# l1.append(0.591)
# l1.append(0.538)
# l1.append(0.486)
# l1.append(0.535)
# l1.append(0.562)
# l1.append(0.546)
# l1.append(0.676)

# APA

# l1.append(0.768)
# l1.append(0.681)
# l1.append(0.383)
# l1.append(0.726)
# l1.append(0.481)
# l1.append(0.639)
# l1.append(0.574)
# l1.append(0.867)
# l1.append(0.591)
# l1.append(0.632)
# l1.append(0.821)
# l1.append(0.559)
# l1.append(0.584)
#
# l2.append(0.101)
# l2.append(0.092)
# l2.append(0.128)
# l2.append(0.133)
# l2.append(0.135)
# l2.append(0.111)
# l2.append(0.143)
# l2.append(0.119)
# l2.append(0.111)
# l2.append(0.128)
# l2.append(0.141)
# l2.append(0.112)
# l2.append(0.105)

# l1.append(0.101)
# l1.append(0.092)
# l1.append(0.128)
# l1.append(0.133)
# l1.append(0.135)
# l1.append(0.111)
# l1.append(0.143)
# l1.append(0.119)
# l1.append(0.111)
# l1.append(0.128)
# l1.append(0.141)
# l1.append(0.112)
# l1.append(0.105)

# CAT

# l1.append(0.475)
# l1.append(0.489)
# l1.append(0.441)
# l1.append(0.434)
# l1.append(0.443)
# l1.append(0.528)
# l1.append(0.374)
# l1.append(0.716)
# l1.append(0.429)
# l1.append(0.555)
# l1.append(0.756)
# l1.append(0.391)
# l1.append(0.321)
#
# l2.append(0.319)
# l2.append(0.261)
# l2.append(0.474)
# l2.append(0.251)
# l2.append(0.194)
# l2.append(0.226)
# l2.append(0.287)
# l2.append(0.306)
# l2.append(0.201)
# l2.append(0.363)
# l2.append(0.291)
# l2.append(0.231)
# l2.append(0.345)

# l1.append(0.319)
# l1.append(0.261)
# l1.append(0.474)
# l1.append(0.251)
# l1.append(0.194)
# l1.append(0.226)
# l1.append(0.287)
# l1.append(0.306)
# l1.append(0.201)
# l1.append(0.363)
# l1.append(0.291)
# l1.append(0.231)
# l1.append(0.345)


# LAKE

# l1.append(0.601)
# l1.append(0.435)
# l1.append(0.438)
# l1.append(0.464)
# l1.append(0.409)
# l1.append(0.401)
# l1.append(0.426)
# l1.append(0.478)
# l1.append(0.409)
# l1.append(0.324)
# l1.append(0.459)
# l1.append(0.389)
# l1.append(0.405)
#
# l2.append(0.122)
# l2.append(0.131)
# l2.append(0.222)
# l2.append(0.114)
# l2.append(0.111)
# l2.append(0.133)
# l2.append(0.113)
# l2.append(0.115)
# l2.append(0.119)
# l2.append(0.117)
# l2.append(0.115)
# l2.append(0.116)
# l2.append(0.143)

# l1.append(0.122)
# l1.append(0.131)
# l1.append(0.222)
# l1.append(0.114)
# l1.append(0.111)
# l1.append(0.133)
# l1.append(0.113)
# l1.append(0.115)
# l1.append(0.119)
# l1.append(0.117)
# l1.append(0.115)
# l1.append(0.116)
# l1.append(0.143)

# MCD

# l1.append(0.289)
# l1.append(0.521)
# l1.append(0.516)
# l1.append(0.461)
# l1.append(0.497)
# l1.append(0.475)
# l1.append(0.654)
# l1.append(0.606)
# l1.append(0.205)
# l1.append(0.731)
# l1.append(0.621)
# l1.append(0.381)
# l1.append(0.255)
#
# l2.append(0.305)
# l2.append(0.321)
# l2.append(0.486)
# l2.append(0.379)
# l2.append(0.418)
# l2.append(0.425)
# l2.append(0.412)
# l2.append(0.365)
# l2.append(0.453)
# l2.append(0.519)
# l2.append(0.515)
# l2.append(0.554)
# l2.append(0.263)

# l1.append(0.305)
# l1.append(0.321)
# l1.append(0.486)
# l1.append(0.379)
# l1.append(0.418)
# l1.append(0.425)
# l1.append(0.412)
# l1.append(0.365)
# l1.append(0.453)
# l1.append(0.519)
# l1.append(0.515)
# l1.append(0.554)
# l1.append(0.263)

# MSFT

# l1.append(0.183)
# l1.append(0.203)
# l1.append(0.399)
# l1.append(0.181)
# l1.append(0.346)
# l1.append(0.276)
# l1.append(0.317)
# l1.append(0.219)
# l1.append(0.222)
# l1.append(0.351)
# l1.append(0.269)
# l1.append(0.237)
# l1.append(0.157)
#
# l2.append(0.177)
# l2.append(0.206)
# l2.append(0.141)
# l2.append(0.146)
# l2.append(0.134)
# l2.append(0.123)
# l2.append(0.151)
# l2.append(0.195)
# l2.append(0.117)
# l2.append(0.129)
# l2.append(0.126)
# l2.append(0.111)
# l2.append(0.132)

# l1.append(0.177)
# l1.append(0.206)
# l1.append(0.141)
# l1.append(0.146)
# l1.append(0.134)
# l1.append(0.123)
# l1.append(0.151)
# l1.append(0.195)
# l1.append(0.117)
# l1.append(0.129)
# l1.append(0.126)
# l1.append(0.111)
# l1.append(0.132)

# ORCL

# l1.append(0.217)
# l1.append(0.274)
# l1.append(0.476)
# l1.append(0.269)
# l1.append(0.446)
# l1.append(0.315)
# l1.append(0.557)
# l1.append(0.191)
# l1.append(0.403)
# l1.append(0.607)
# l1.append(0.593)
# l1.append(0.272)
# l1.append(0.237)
#
# l2.append(0.201)
# l2.append(0.553)
# l2.append(0.533)
# l2.append(0.349)
# l2.append(0.349)
# l2.append(0.454)
# l2.append(0.364)
# l2.append(0.476)
# l2.append(0.404)
# l2.append(0.311)
# l2.append(0.371)
# l2.append(0.273)
# l2.append(0.566)

# l1.append(0.201)
# l1.append(0.553)
# l1.append(0.533)
# l1.append(0.349)
# l1.append(0.349)
# l1.append(0.454)
# l1.append(0.364)
# l1.append(0.476)
# l1.append(0.404)
# l1.append(0.311)
# l1.append(0.371)
# l1.append(0.273)
# l1.append(0.566)


# SUN

# l1.append(1.058)
# l1.append(0.572)
# l1.append(0.826)
# l1.append(0.726)
# l1.append(0.657)
# l1.append(0.609)
# l1.append(0.532)
# l1.append(0.812)
# l1.append(0.722)
# l1.append(0.631)
# l1.append(0.671)
# l1.append(0.628)
# l1.append(0.711)
#
# l2.append(0.179)
# l2.append(0.193)
# l2.append(0.174)
# l2.append(0.308)
# l2.append(0.166)
# l2.append(0.171)
# l2.append(0.185)
# l2.append(0.181)
# l2.append(0.168)
# l2.append(0.178)
# l2.append(0.189)
# l2.append(0.188)
# l2.append(0.206)

# l1.append(0.179)
# l1.append(0.193)
# l1.append(0.174)
# l1.append(0.308)
# l1.append(0.166)
# l1.append(0.171)
# l1.append(0.185)
# l1.append(0.181)
# l1.append(0.168)
# l1.append(0.178)
# l1.append(0.189)
# l1.append(0.188)
# l1.append(0.206)

# T

# l1.append(0.301)
# l1.append(0.201)
# l1.append(0.137)
# l1.append(0.191)
# l1.append(0.198)
# l1.append(0.215)
# l1.append(0.151)
# l1.append(0.223)
# l1.append(0.111)
# l1.append(0.151)
# l1.append(0.178)
# l1.append(0.226)
# l1.append(0.131)
#
# l2.append(0.071)
# l2.append(0.075)
# l2.append(0.087)
# l2.append(0.101)
# l2.append(0.055)
# l2.append(0.083)
# l2.append(0.039)
# l2.append(0.062)
# l2.append(0.038)
# l2.append(0.063)
# l2.append(0.089)
# l2.append(0.041)
# l2.append(0.161)

# l1.append(0.071)
# l1.append(0.075)
# l1.append(0.087)
# l1.append(0.101)
# l1.append(0.055)
# l1.append(0.083)
# l1.append(0.039)
# l1.append(0.062)
# l1.append(0.038)
# l1.append(0.063)
# l1.append(0.089)
# l1.append(0.041)
# l1.append(0.161)

# UTX

# l1.append(0.351)
# l1.append(0.556)
# l1.append(0.441)
# l1.append(0.609)
# l1.append(0.381)
# l1.append(0.391)
# l1.append(0.577)
# l1.append(0.376)
# l1.append(0.634)
# l1.append(0.317)
# l1.append(0.566)
# l1.append(0.619)
# l1.append(0.224)
#
# l2.append(0.296)
# l2.append(0.294)
# l2.append(0.396)
# l2.append(0.335)
# l2.append(0.361)
# l2.append(0.449)
# l2.append(0.446)
# l2.append(0.195)
# l2.append(0.319)
# l2.append(0.311)
# l2.append(0.266)
# l2.append(0.399)
# l2.append(0.234)

# l1.append(0.296)
# l1.append(0.294)
# l1.append(0.396)
# l1.append(0.335)
# l1.append(0.361)
# l1.append(0.449)
# l1.append(0.446)
# l1.append(0.195)
# l1.append(0.319)
# l1.append(0.311)
# l1.append(0.266)
# l1.append(0.399)
# l1.append(0.234)

# WWD

# l1.append(0.304)
# l1.append(0.661)
# l1.append(0.618)
# l1.append(0.556)
# l1.append(0.586)
# l1.append(0.551)
# l1.append(0.838)
# l1.append(0.604)
# l1.append(1.022)
# l1.append(0.501)
# l1.append(0.866)
# l1.append(0.969)
# l1.append(0.521)
#
# l2.append(0.283)
# l2.append(0.345)
# l2.append(0.418)
# l2.append(0.502)
# l2.append(0.312)
# l2.append(0.264)
# l2.append(0.458)
# l2.append(0.233)
# l2.append(0.408)
# l2.append(0.411)
# l2.append(0.301)
# l2.append(0.268)
# l2.append(0.451)

# l1.append(0.283)
# l1.append(0.345)
# l1.append(0.418)
# l1.append(0.502)
# l1.append(0.312)
# l1.append(0.264)
# l1.append(0.458)
# l1.append(0.233)
# l1.append(0.408)
# l1.append(0.411)
# l1.append(0.301)
# l1.append(0.268)
# l1.append(0.451)

# findtstats(l1, l2)
#
# sys.exit()


# plotskewedhistogram(df,'AAPL_prices','green','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "AAPL" +".png")
# plotskewedhistogram(df,'ABT_prices','red','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "ABTs" +".png")
# plotskewedhistogram(df,'AEM_prices','blue','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "AEM" +".png")
# plotskewedhistogram(df,'AFG_prices','violet','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "AFG" +".png")
#
# plotskewedhistogram(df,'APA_prices','green','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "APA" +".png")
# plotskewedhistogram(df,'CAT_prices','red','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "CAT" +".png")
# plotskewedhistogram(df,'LAKE_prices','blue','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "LAKE" +".png")
# plotskewedhistogram(df,'MCD_prices','violet','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "MCD" +".png")
#
# plotskewedhistogram(df,'MSFT_prices','green','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "MSFT" +".png")
# plotskewedhistogram(df,'ORCL_prices','red','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "ORCL" +".png")
# plotskewedhistogram(df,'SUN_prices','blue','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "SUN" +".png")
# plotskewedhistogram(df,'T_prices','violet','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "T" +".png")
#
# plotskewedhistogram(df,'UTX_prices','green','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "UTX" +".png")
# plotskewedhistogram(df,'WWD_prices','red','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "WWD" +".png")

# plotskewedhistogram(df,'AFG_prices','green','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "AFG" +".png")
# plotskewedhistogram(df,'T_prices','red','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "T" +".png")
# plotskewedhistogram(df,'AAPL_prices','blue','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "AAPL" +".png")
# plotskewedhistogram(df,'ORCL_prices','black','step',"/data/achivuku/PycharmProjects/financedataanalysis/"+ "ORCL" +".png")
# sys.exit()


# msemodelfstatmae, msemodelgraph, mseerrorsframe = calculatefstatistic(msemodelrmae,msemodelurmae, 'green')
# qmemodelfstatmae, qmemodelgraph, qmeerrorsframe = calculatefstatistic(qmemodelrmae,qmemodelurmae, 'red')

msemodelfstatrmse, msemodelgraph, mseerrorsframe = calculatefstatistic(msemodelrrmse,msemodelurrmse, 'green')
# qmemodelfstatmae, qmemodelgraph, qmeerrorsframe = calculatefstatistic(qmemodelrrmse,qmemodelurrmse, 'red')

# grurnnmodelfstatrmse, grurnnmodelgraph, grurnnerrorsframe = calculatefstatistic(grurnnmodelrrmse,grurnnmodelurrmse, 'red')

# print('msemodelfstatmae',msemodelfstatmae)
# print('qmemodelfstatmae',qmemodelfstatmae)
# print('grurnnmodelgraph',grurnnmodelgraph)

# print('msemodelgraph edges',msemodelfstatrmse['ABT_prices']['WWD_prices'])
# print('msemodelgraph edges',msemodelgraph.edges(data=True))
# print('msemodelgraph nodes',sorted(msemodelgraph.nodes()))

# print('qmemodelgraph edges',qmemodelgraph.edges(data=True))
# print('qmemodelgraph nodes',sorted(qmemodelgraph.nodes()))

# print('grurnnmodelgraph edges',grurnnmodelfstatrmse['UTX_prices']['T_prices'])
# print('grurnnmodelgraph edges',grurnnmodelgraph.edges(data=True))
# print('grurnnmodelgraph nodes',sorted(grurnnmodelgraph.nodes()))

# nx.write_gpickle(msemodelgraph, MsemodelurrmsegraphPath)
# nx.write_gpickle(qmemodelgraph, QmemodelurrmsegraphPath)

# nx.write_gpickle(grurnnmodelgraph, GrurnnmodelurrmsegraphPath)


# sortededges = sorted(msemodelgraph.edges(), key=lambda t: (t[1], t[0]), reverse=False)
# print('sortededges',sortededges)
# # l1 = []
# # l2 = []
# for edge in sortededges:
#     print(edge,msemodelrrmse[edge[1]+'_prices'][edge[0]+'_prices'])
    # print(edge,msemodelurrmse[edge[1]+'_prices'][edge[0]+'_prices'])
#     l1.append(msemodelrrmse[edge[1]+'_prices'][edge[0]+'_prices'])
#     l2.append(msemodelurrmse[edge[1]+'_prices'][edge[0]+'_prices'])
# findtstats(l1, l2)

# sortededges = sorted(grurnnmodelgraph.edges(), key=lambda t: (t[1], t[0]), reverse=False)
# print('sortededges',sortededges)
# l1 = []
# l2 = []
# for edge in sortededges:
#     # print(edge,grurnnmodelrrmse[edge[1]+'_prices'][edge[0]+'_prices'])
#     # print(edge,grurnnmodelurrmse[edge[1]+'_prices'][edge[0]+'_prices'])
#     l1.append(grurnnmodelrrmse[edge[1]+'_prices'][edge[0]+'_prices'])
#     l2.append(grurnnmodelurrmse[edge[1]+'_prices'][edge[0]+'_prices'])
# findtstats(l1, l2)

from pandas import DataFrame
from pandas import Series
from pandas import concat
from pandas import read_csv
from pandas import datetime

from pandas import Series
from pandas import DataFrame
from pandas import TimeGrouper
import matplotlib.pyplot as plt
from os import makedirs
import os

df = pd.read_csv("/data/achivuku/PycharmProjects/financedataanalysis/pricesvolumes.csv")
cols = [1,2,3,4,6,8,10,12,14,16,18,20,21,22,23,24,26,28,30,32,33,34,36,38,40,42]

df.drop(df.columns[cols],axis=1,inplace=True)
df.fillna(0, inplace=True)
allcols = df.columns.tolist()
allcols.remove("Date")
allcols.remove("IXIC_prices")
allcols.remove("B_prices")
allcols.remove("LAKE_prices")
allcols.remove("SUN_prices")

dateindex = pd.to_datetime(df['Date'], infer_datetime_format=True, yearfirst='1996')
RootDir = "/data/achivuku/PycharmProjects/financedataanalysis/CauseEffectPlots/"
# print(df.head(10))

# series = Series.from_csv('daily-minimum-temperatures.csv', header=0)
# groups = series.groupby(TimeGrouper('A'))
prices = DataFrame()

allcols = ["ABT_prices"]
# allcols = ["AFG_prices"]
colour="blue"

# allcols = ["AAPL_prices"]
# allcols = ["MCD_prices"]
# allcols = ["ORCL_prices"]
# allcols = ["MSFT_prices"]
# allcols = ["APA_prices"]
# allcols = ["CAT_prices"]
# allcols = ["UTX_prices"]
# colour="green"


for stock in allcols:
    if(not os.path.exists(RootDir + stock.rstrip('_prices'))):
        os,makedirs(RootDir + "DNN/" + stock.rstrip('_prices'))
        # os,makedirs(RootDir + "RNN/" + stock.rstrip('_prices'))


    stock_data = df[[stock]]
    stock_data.index = dateindex
    # format='', dayfirst='26/07/1996', yearfirst='1996'
    print(stock_data.head(10))
    stock_data.plot(color=colour)
    # xlabel(stock.rstrip("_prices") + ' Time')
    # ylabel(stock.rstrip("_prices") + ' Price')
    xlabel('Time (years)')
    ylabel('Price (dollars)')
    plt.grid(True)
    # plt.show()
    plt.savefig(RootDir + "DNN/" + stock.rstrip('_prices') + "/" + stock + ".png", format="PNG", dpi=300)
    # plt.savefig(RootDir + "RNN/" + stock.rstrip('_prices') + "/" + stock + ".png", format="PNG", dpi=300)

    stockcauses = [col + '_prices' for col in msemodelgraph.predecessors(stock.rstrip('_prices'))]
    # stockcauses = [col + '_prices' for col in grurnnmodelgraph.predecessors(stock.rstrip('_prices'))]
    if stockcauses:
        for stockcause in stockcauses:
            stock_data = df[[stockcause]]
            stock_data.index = dateindex
            stock_data.plot(color=colour)
            # xlabel(stockcause.rstrip("_prices") + ' Time')
            # ylabel(stockcause.rstrip("_prices") + ' Price')
            xlabel('Time (years)')
            ylabel('Price (dollars)')
            plt.grid(True)
            plt.savefig(RootDir + "DNN/" + stock.rstrip('_prices') + "/" + stockcause + ".png", format="PNG", dpi=300)
            # plt.savefig(RootDir + "RNN/" + stock.rstrip('_prices') + "/" + stockcause + ".png", format="PNG", dpi=300)

#     sys.exit()
# 	years[name.year] = group.values
# years.plot(subplots=True, legend=False)
# pyplot.show()

print('Done')

# graph_pos=nx.circular_layout(msemodelgraph)
# nx.draw_networkx(msemodelgraph, graph_pos, node_size=1500, font_size=8, font_weight='bold', with_labels=True, arrows=True, node_color = 'green')
# plt.tight_layout()
# plt.savefig(MSEGraphPath, format="PNG")
# savenetworkxgraph(msemodelgraph, 'green', MSEGraphPath)

# graph_pos = nx.circular_layout(qmemodelgraph)
# # graph_pos = nx.circular_layout(qmemodelgraph)
# nx.draw_networkx(qmemodelgraph, graph_pos, node_size=1500, font_size=8, font_weight='bold', with_labels=True, arrows=True, node_color = 'red')
# plt.tight_layout()
# plt.savefig(QMEGraphPath, format="PNG")
# savenetworkxgraph(qmemodelgraph, 'red', QMEGraphPath)

sys.exit()

mseerrorsframe.to_pickle(MSEErrorsDataframePath)
qmeerrorsframe.to_pickle(QMEErrorsDataframePath)
# QMEErrors = pd.read_pickle("QMEErrors-Graph.pkl")
# QMEErrors.loc['ABT_prices']['SUN_restricted']


with open(MSEModelFstatMAEPath, 'wb') as handle:
    pickle.dump(msemodelfstatmae,handle,protocol=pickle.HIGHEST_PROTOCOL)

with open(QMEModelFstatMAEPath, 'wb') as handle:
    pickle.dump(qmemodelfstatmae,handle,protocol=pickle.HIGHEST_PROTOCOL)
# handle1 = open("QMECauses-Graph.pkl", 'rb')
# QMECauses = pickle.load(handle1)
# QMECauses['B_prices']['LAKE_prices']

# Plot Options :
# https://networkx.github.io/documentation/networkx-1.10/reference/generated/networkx.drawing.nx_pylab.draw_networkx.html#networkx.drawing.nx_pylab.draw_networkx1
# https://www.udacity.com/wiki/creating-network-graphs-with-python
# TO DO : Remove duplicate vertices and add Ftest values as edge weights

# https://matplotlib.org/1.2.1/examples/pylab_examples/histogram_demo.html