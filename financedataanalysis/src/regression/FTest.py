import collections
import networkx as nx
import matplotlib.pyplot as plt
import sys
import pandas as pd
import pickle

columns = ['AAPL_restricted', 'ABT_restricted', 'AEM_restricted', 'AFG_restricted', 'APA_restricted', 'B_restricted', 'CAT_restricted', 'IXIC_restricted', 'LAKE_restricted', 'MCD_restricted', 'MSFT_restricted', 'ORCL_restricted', 'SUN_restricted', 'T_restricted', 'UTX_restricted', 'WWD_restricted','AAPL_unrestricted', 'ABT_unrestricted', 'AEM_unrestricted', 'AFG_unrestricted', 'APA_unrestricted', 'B_unrestricted', 'CAT_unrestricted', 'IXIC_unrestricted', 'LAKE_unrestricted', 'MCD_unrestricted', 'MSFT_unrestricted', 'ORCL_unrestricted', 'SUN_unrestricted', 'T_unrestricted', 'UTX_unrestricted', 'WWD_unrestricted']
indexes = ['AAPL_prices', 'ABT_prices', 'AEM_prices', 'AFG_prices', 'APA_prices', 'B_prices', 'CAT_prices', 'IXIC_prices', 'LAKE_prices', 'MCD_prices', 'MSFT_prices', 'ORCL_prices', 'SUN_prices', 'T_prices', 'UTX_prices', 'WWD_prices']

qmemodelrmae = collections.defaultdict(dict)
qmemodelrmse = collections.defaultdict(dict)
qmemodelurmae = collections.defaultdict(dict)
qmemodelurmse = collections.defaultdict(dict)

msemodelrmae = collections.defaultdict(dict)
msemodelrmse = collections.defaultdict(dict)
msemodelurmae = collections.defaultdict(dict)
msemodelurmse = collections.defaultdict(dict)

qmemodelrmae = {'CAT_prices': {'LAKE_prices': 9.8067946913974744, 'SUN_prices': 9.8065987692938918, 'WWD_prices': 9.8069893070295748, 'UTX_prices': 10.138100476981768, 'MCD_prices': 9.8049104890013048, 'MSFT_prices': 9.8071846232694746, 'ORCL_prices': 10.137779062557843, 'T_prices': 9.8065987692938918}, 'APA_prices': {'LAKE_prices': 6.2470729117299992, 'SUN_prices': 6.2496299843382994, 'WWD_prices': 6.2470206026937447, 'T_prices': 6.2464926099465563, 'UTX_prices': 6.2470206026937447, 'MCD_prices': 6.7493690166598048, 'MSFT_prices': 6.5465720796896738, 'ORCL_prices': 6.2470171738294216, 'B_prices': 6.2470449849671006, 'CAT_prices': 6.2462334299399185}, 'SUN_prices': {'UTX_prices': 2.9698659987231486, 'T_prices': 3.6757941964405036, 'WWD_prices': 2.9559149513057634}, 'ABT_prices': {'LAKE_prices': 1.9654063592549242, 'APA_prices': 1.9599922158359702, 'SUN_prices': 1.9601466730529187, 'WWD_prices': 1.9601466730529187, 'AEM_prices': 1.9603402793797013, 'T_prices': 1.9601466730529187, 'UTX_prices': 1.9629499050526837, 'AFG_prices': 1.9601466730529187, 'MSFT_prices': 2.1443336923137988, 'ORCL_prices': 1.9588662622800839, 'MCD_prices': 2.0304634941948785, 'B_prices': 1.9604184644674163, 'CAT_prices': 1.9601734041388519}, 'LAKE_prices': {'SUN_prices': 0.77237963660869724, 'WWD_prices': 0.77243694853938483, 'UTX_prices': 0.75456961338816131, 'MCD_prices': 0.77237282344718383, 'MSFT_prices': 0.77227296330570394, 'ORCL_prices': 1.0180672095491996, 'T_prices': 0.7725262029498231}, 'UTX_prices': {'WWD_prices': 4.5730433735192992}, 'AEM_prices': {'LAKE_prices': 3.9414025057375039, 'APA_prices': 4.2745435870550814, 'SUN_prices': 4.8906591172311824, 'AFG_prices': 4.464973103766348, 'WWD_prices': 4.8906372942955665, 'T_prices': 4.8906591172311824, 'UTX_prices': 4.8905947760039687, 'MCD_prices': 4.8906591172311824, 'MSFT_prices': 4.8907045308281392, 'ORCL_prices': 4.8907763107150206, 'B_prices': 4.8905851164674443, 'CAT_prices': 4.8906591172311824}, 'T_prices': {'UTX_prices': 4.0154662422105378, 'WWD_prices': 4.0145400330911274}, 'AAPL_prices': {'LAKE_prices': 16.890648691015304, 'APA_prices': 16.883922806284787, 'SUN_prices': 16.89114646412968, 'ABT_prices': 16.881364164165422, 'WWD_prices': 16.883922806284787, 'AEM_prices': 17.702798419528538, 'T_prices': 16.883922806284787, 'UTX_prices': 17.172046489341586, 'AFG_prices': 16.855211247961506, 'MSFT_prices': 16.891340572382109, 'ORCL_prices': 16.884430410347733, 'MCD_prices': 16.887749760446983, 'B_prices': 16.882913360097049, 'CAT_prices': 16.883908941231521}, 'AFG_prices': {'LAKE_prices': 1.4491514816782833, 'APA_prices': 1.4909795008453668, 'SUN_prices': 1.4909676285351023, 'WWD_prices': 1.4384925031973645, 'T_prices': 1.4909595788693895, 'UTX_prices': 1.4909795008453668, 'MCD_prices': 1.4909795008453668, 'MSFT_prices': 1.4875977340087392, 'ORCL_prices': 1.4909784496220109, 'B_prices': 1.4909795008453668, 'CAT_prices': 1.4912612776351131}, 'MSFT_prices': {'ORCL_prices': 3.0411182665357401, 'UTX_prices': 3.3071817217309492, 'WWD_prices': 3.2270820330950172, 'SUN_prices': 3.2270752919265648, 'T_prices': 3.3072031102149313}, 'ORCL_prices': {'UTX_prices': 2.0005007316863614, 'WWD_prices': 1.9726159644282721, 'SUN_prices': 1.9677775875415677, 'T_prices': 1.9677569532706067}, 'MCD_prices': {'SUN_prices': 15.371076294643427, 'WWD_prices': 16.534221255233863, 'UTX_prices': 18.097392522275836, 'MSFT_prices': 17.103768329994352, 'ORCL_prices': 17.399334656958487, 'T_prices': 17.106762084462286}, 'IXIC_prices': {'LAKE_prices': 606.07778607536761, 'APA_prices': 606.11762759140117, 'SUN_prices': 605.83081469566991, 'ABT_prices': 586.24659120646959, 'UTX_prices': 606.02715059168202, 'WWD_prices': 584.51675913692304, 'AEM_prices': 601.32311548968551, 'T_prices': 593.75106616051369, 'AAPL_prices': 199.82649480283649, 'AFG_prices': 593.68226278467114, 'MSFT_prices': 595.24109030330885, 'ORCL_prices': 583.89192413130615, 'MCD_prices': 606.07519475400841, 'CAT_prices': 584.61992722056266, 'B_prices': 606.3222164777369}, 'B_prices': {'LAKE_prices': 1.7426737302269031, 'SUN_prices': 1.8597653485591115, 'WWD_prices': 1.8598291546690697, 'T_prices': 1.8679758657816967, 'UTX_prices': 1.8597662289937338, 'MCD_prices': 1.8599682284336465, 'MSFT_prices': 1.8691483323090996, 'ORCL_prices': 1.8598659122691434, 'CAT_prices': 1.8598579469069936}}
qmemodelurmae = {'CAT_prices': {'LAKE_prices': 2.1763414532530541, 'SUN_prices': 5.3871154305202511, 'WWD_prices': 11.234021871230182, 'UTX_prices': 14.696528136808109, 'MCD_prices': 14.08616260703093, 'MSFT_prices': 3.3036329232010186, 'ORCL_prices': 1.4429374937917672, 'T_prices': 1.5523762991225798}, 'APA_prices': {'LAKE_prices': 2.1763414532530541, 'SUN_prices': 5.3873393744425053, 'WWD_prices': 11.234021871230182, 'T_prices': 1.5525800245260102, 'UTX_prices': 14.697643384746478, 'MCD_prices': 14.086242207047206, 'MSFT_prices': 3.3036371249778598, 'ORCL_prices': 1.4429786364237467, 'B_prices': 6.4256308848561803, 'CAT_prices': 12.277434923757914}, 'SUN_prices': {'UTX_prices': 14.697249782786649, 'T_prices': 1.5525362817290562, 'WWD_prices': 11.234021871230182}, 'ABT_prices': {'LAKE_prices': 2.062479780857859, 'APA_prices': 16.775046880884108, 'SUN_prices': 5.3873384637770307, 'WWD_prices': 11.234003386154674, 'AEM_prices': 6.3059697431676529, 'T_prices': 1.5525349934895833, 'UTX_prices': 14.696846940782335, 'AFG_prices': 5.4093538782954997, 'MSFT_prices': 3.2836328531402388, 'ORCL_prices': 1.4426857215906281, 'MCD_prices': 14.086061946395176, 'B_prices': 6.5521655138801123, 'CAT_prices': 12.998172149159551}, 'LAKE_prices': {'SUN_prices': 5.3873702990463359, 'WWD_prices': 11.234040820053201, 'UTX_prices': 14.697784344043606, 'MCD_prices': 14.085816613988939, 'MSFT_prices': 3.3036067177267636, 'ORCL_prices': 1.4502360758438608, 'T_prices': 1.5525362817290562}, 'UTX_prices': {'WWD_prices': 11.234021871230182}, 'AEM_prices': {'LAKE_prices': 2.1763414532530541, 'APA_prices': 16.763574201297136, 'SUN_prices': 5.3873393744425053, 'AFG_prices': 5.4051322450824815, 'WWD_prices': 11.234021871230182, 'T_prices': 1.5525362817290562, 'UTX_prices': 14.702780290990093, 'MCD_prices': 14.086034231248245, 'MSFT_prices': 3.303636120814903, 'ORCL_prices': 1.4429527840583154, 'B_prices': 6.5525342941284181, 'CAT_prices': 12.471741415784249}, 'T_prices': {'UTX_prices': 14.698539980720071, 'WWD_prices': 11.235613707000134}, 'AAPL_prices': {'LAKE_prices': 2.1763414532530541, 'APA_prices': 16.754178129457959, 'SUN_prices': 5.3873178313760199, 'ABT_prices': 5.2433801264544719, 'WWD_prices': 11.467524165733188, 'AEM_prices': 6.3049064947888738, 'T_prices': 1.5525362817290562, 'UTX_prices': 14.697774480682572, 'AFG_prices': 5.4051322450824815, 'MSFT_prices': 3.3036067177267636, 'ORCL_prices': 1.4276677695754307, 'MCD_prices': 14.084314695370743, 'B_prices': 6.8351174310921063, 'CAT_prices': 12.454633293899835}, 'AFG_prices': {'LAKE_prices': 2.1763378389520582, 'APA_prices': 16.765306653540119, 'SUN_prices': 5.3873418832916062, 'WWD_prices': 11.234021871230182, 'T_prices': 1.5525737329246172, 'UTX_prices': 14.696528136808109, 'MCD_prices': 14.08609100042605, 'MSFT_prices': 3.3114843212701137, 'ORCL_prices': 1.4429527840583154, 'B_prices': 6.5522494796054813, 'CAT_prices': 12.454670765197354}, 'MSFT_prices': {'ORCL_prices': 1.4428839895460341, 'UTX_prices': 14.694120230082593, 'WWD_prices': 11.234021871230182, 'SUN_prices': 5.3872809939914283, 'T_prices': 1.5525362817290562}, 'ORCL_prices': {'UTX_prices': 14.700822907491448, 'WWD_prices': 11.229651963477041, 'SUN_prices': 6.2164566414028988, 'T_prices': 1.5525167214325051}, 'MCD_prices': {'SUN_prices': 5.3874276379354642, 'WWD_prices': 11.234192949182846, 'UTX_prices': 12.54279260822371, 'MSFT_prices': 3.3034688176672442, 'ORCL_prices': 1.4017477506126454, 'T_prices': 1.5525264577927933}, 'IXIC_prices': {'LAKE_prices': 2.1763414532530541, 'APA_prices': 16.763702695509966, 'SUN_prices': 6.0824085484922321, 'ABT_prices': 5.3857483745400421, 'UTX_prices': 15.271734905866236, 'WWD_prices': 11.234187880372689, 'AEM_prices': 6.3703817560781841, 'T_prices': 1.5526357311049317, 'AAPL_prices': 13.591564559936524, 'AFG_prices': 5.4079091813829212, 'MSFT_prices': 3.3062291993035209, 'ORCL_prices': 1.2812499593285953, 'MCD_prices': 14.085953771055134, 'CAT_prices': 13.199856652153862, 'B_prices': 6.5522978190503087}, 'B_prices': {'LAKE_prices': 2.1763414532530541, 'SUN_prices': 5.9280423133201845, 'WWD_prices': 11.233883295495525, 'T_prices': 1.5525648545595556, 'UTX_prices': 13.574048714232601, 'MCD_prices': 14.086200629340278, 'MSFT_prices': 3.3036067177267636, 'ORCL_prices': 1.2962800172419331, 'CAT_prices': 12.454633293899835}}
#qmemodelrmse = {'CAT_prices': {'LAKE_prices': 143.49973700030955, 'SUN_prices': 143.49537723516326, 'WWD_prices': 143.5041826435164, 'UTX_prices': 151.10569286471099, 'MCD_prices': 143.45931208990757, 'MSFT_prices': 143.50824719597313, 'ORCL_prices': 151.09838078318077, 'T_prices': 143.49537723516326}, 'APA_prices': {'LAKE_prices': 69.236226606680674, 'SUN_prices': 69.373908775927973, 'WWD_prices': 69.235146355473134, 'T_prices': 69.22512136347153, 'UTX_prices': 69.235146355473134, 'MCD_prices': 79.01579584358565, 'MSFT_prices': 75.212714174058704, 'ORCL_prices': 69.235065567415518, 'B_prices': 69.235635165295577, 'CAT_prices': 69.220216587789693}, 'SUN_prices': {'UTX_prices': nan, 'T_prices': nan, 'WWD_prices': nan}, 'ABT_prices': {'LAKE_prices': 8.7171323212143648, 'APA_prices': 8.6878482874702012, 'SUN_prices': 8.6886685966666235, 'WWD_prices': 8.6886685966666235, 'AEM_prices': 8.6897498355192297, 'T_prices': 8.6886685966666235, 'UTX_prices': 8.7038162935793011, 'AFG_prices': 8.6886685966666235, 'MSFT_prices': 9.7575561716665629, 'ORCL_prices': 8.6816629656000082, 'MCD_prices': 9.0812329681870203, 'B_prices': 8.6901544019287709, 'CAT_prices': 8.68881072624057}, 'LAKE_prices': {'SUN_prices': nan, 'WWD_prices': nan, 'UTX_prices': nan, 'MCD_prices': nan, 'MSFT_prices': nan, 'ORCL_prices': nan, 'T_prices': nan}, 'UTX_prices': {'WWD_prices': 50.174909764956801}, 'AEM_prices': {'LAKE_prices': 29.282206975400836, 'APA_prices': 33.145617999905852, 'SUN_prices': 41.11888148488562, 'AFG_prices': 35.496567176370057, 'WWD_prices': 41.11857061947093, 'T_prices': 41.11888148488562, 'UTX_prices': 41.118045866723158, 'MCD_prices': 41.11888148488562, 'MSFT_prices': 41.11942167593763, 'ORCL_prices': 41.120312963747509, 'B_prices': 41.117935744142223, 'CAT_prices': 41.11888148488562}, 'T_prices': {'UTX_prices': 19.149315314199409, 'WWD_prices': 19.141796865026937}, 'AAPL_prices': {'LAKE_prices': 337.44094501570157, 'APA_prices': 337.19649019926982, 'SUN_prices': 337.45906575520831, 'ABT_prices': 337.10355336307703, 'WWD_prices': 337.19649019926982, 'AEM_prices': 367.76507751863767, 'T_prices': 337.19649019926982, 'UTX_prices': 347.75119995915031, 'AFG_prices': 336.15305311414932, 'MSFT_prices': 337.46600389667589, 'ORCL_prices': 337.21513735702615, 'MCD_prices': 337.33610257416768, 'B_prices': 337.15947217754291, 'CAT_prices': 337.19588335822613}, 'AFG_prices': {'LAKE_prices': 4.9885446305368459, 'APA_prices': 5.1336745648602253, 'SUN_prices': 5.1336552034016529, 'WWD_prices': 4.947260145424238, 'T_prices': 5.1336028597713295, 'UTX_prices': 5.1336745648602253, 'MCD_prices': 5.1336745648602253, 'MSFT_prices': 5.1215568835439242, 'ORCL_prices': 5.1336733955183842, 'B_prices': 5.1336745648602253, 'CAT_prices': 5.13462192934323}, 'MSFT_prices': {'ORCL_prices': 15.142357795067083, 'UTX_prices': 17.262497067918964, 'WWD_prices': 16.613356282352623, 'SUN_prices': 16.613306307325175, 'T_prices': 17.262653231153301}, 'ORCL_prices': {'UTX_prices': 6.4046424279805105, 'WWD_prices': 6.2787289762808607, 'SUN_prices': 6.2554125729729151, 'T_prices': 6.255307481803146}, 'MCD_prices': {'SUN_prices': 282.87247553806679, 'WWD_prices': 321.43340928819447, 'UTX_prices': 377.6954562717014, 'MSFT_prices': 341.74240874246834, 'ORCL_prices': 352.11021560968135, 'T_prices': 341.83153427223755}, 'IXIC_prices': {'LAKE_prices': 412406.87246732024, 'APA_prices': 412458.78807189543, 'SUN_prices': 412086.36789215688, 'ABT_prices': 387168.44624183007, 'UTX_prices': 412341.78897058824, 'WWD_prices': 384944.46200980392, 'AEM_prices': 406241.50269607845, 'T_prices': 396630.81258169934, 'AAPL_prices': 52696.893086192809, 'AFG_prices': 396544.0588235294, 'MSFT_prices': 398518.81911764707, 'ORCL_prices': 384187.29517973855, 'MCD_prices': 412403.72140522877, 'CAT_prices': 385073.85171568627, 'B_prices': 412729.64289215684}, 'B_prices': {'LAKE_prices': 5.5546994053460415, 'SUN_prices': 6.229593780617309, 'WWD_prices': 6.2299635619119877, 'T_prices': 6.2768542146371082, 'UTX_prices': 6.2295995674881279, 'MCD_prices': 6.2306957045411755, 'MSFT_prices': 6.2832571266523374, 'ORCL_prices': 6.2301728217430368, 'CAT_prices': 6.2301340913460921}}
#qmemodelurmse = {'CAT_prices': {'LAKE_prices': nan, 'SUN_prices': nan, 'WWD_prices': 140.44538985109017, 'UTX_prices': 259.04397024516186, 'MCD_prices': 244.05434442657273, 'MSFT_prices': 17.91136403301962, 'ORCL_prices': 3.9449575474059659, 'T_prices': 4.4302863710066855}, 'APA_prices': {'LAKE_prices': nan, 'SUN_prices': nan, 'WWD_prices': 140.44538985109017, 'T_prices': 4.4312788436615387, 'UTX_prices': 259.07827140459051, 'MCD_prices': 244.05608420777165, 'MSFT_prices': 17.911386776593776, 'ORCL_prices': 3.9451158149569641, 'B_prices': 50.181373745787376, 'CAT_prices': 199.65761128344568}, 'SUN_prices': {'UTX_prices': 259.06613454382403, 'T_prices': 4.4310790626052157, 'WWD_prices': 140.44538985109017}, 'ABT_prices': {'LAKE_prices': nan, 'APA_prices': 362.19108136744279, 'SUN_prices': nan, 'WWD_prices': 140.44491856394251, 'AEM_prices': 64.464005753261588, 'T_prices': 4.4310734639759932, 'UTX_prices': 259.053689834495, 'AFG_prices': 38.228778724421083, 'MSFT_prices': 17.742207266614329, 'ORCL_prices': 3.9439877316842673, 'MCD_prices': 244.05108634599674, 'B_prices': 51.956270325105955, 'CAT_prices': 219.34993860581341}, 'LAKE_prices': {'SUN_prices': nan, 'WWD_prices': 140.44581111334509, 'UTX_prices': 259.08272158554178, 'MCD_prices': 244.04410137101715, 'MSFT_prices': 17.911140925588171, 'ORCL_prices': 3.9734191557940313, 'T_prices': 4.4310790626052157}, 'UTX_prices': {'WWD_prices': 140.44538985109017}, 'AEM_prices': {'LAKE_prices': nan, 'APA_prices': 361.75379581825405, 'SUN_prices': nan, 'AFG_prices': 38.177214189915873, 'WWD_prices': 140.44538985109017, 'T_prices': 4.4310790626052157, 'UTX_prices': 259.23693859623927, 'MCD_prices': 244.05054732179329, 'MSFT_prices': 17.911387080772251, 'ORCL_prices': 3.9450150284112668, 'B_prices': 51.961862302293966, 'CAT_prices': 204.07589598013683}, 'T_prices': {'UTX_prices': 259.10572429981107, 'WWD_prices': 140.4846652560764}, 'AAPL_prices': {'LAKE_prices': nan, 'APA_prices': 361.41096116608264, 'SUN_prices': nan, 'ABT_prices': 33.81372562483245, 'WWD_prices': 145.26713647780076, 'AEM_prices': 64.447615569868901, 'T_prices': 4.4310790626052157, 'UTX_prices': 259.08234416487949, 'AFG_prices': 38.177214189915873, 'MSFT_prices': 17.911140925588171, 'ORCL_prices': 3.884678509032804, 'MCD_prices': 244.00102156096813, 'B_prices': 55.98681038251889, 'CAT_prices': 204.46242041494332}, 'AFG_prices': {'LAKE_prices': nan, 'APA_prices': 361.81716768352032, 'SUN_prices': nan, 'WWD_prices': 140.44538985109017, 'T_prices': 4.4312518640281331, 'UTX_prices': 259.04397024516186, 'MCD_prices': 244.05223117404515, 'MSFT_prices': 17.975505065917968, 'ORCL_prices': 3.9450150284112668, 'B_prices': 51.957452252955221, 'CAT_prices': 204.46306814555248}, 'MSFT_prices': {'ORCL_prices': 3.9447444890838823, 'UTX_prices': 258.97089708116317, 'WWD_prices': 140.44538985109017, 'SUN_prices': nan, 'T_prices': 4.4310790626052157}, 'ORCL_prices': {'UTX_prices': 259.17689564025483, 'WWD_prices': 140.34234120487389, 'SUN_prices': nan, 'T_prices': 4.4309856629839128}, 'MCD_prices': {'SUN_prices': nan, 'WWD_prices': 140.44926997166053, 'UTX_prices': 196.11855875651042, 'MSFT_prices': 17.909947139764924, 'ORCL_prices': 3.7709235646366293, 'T_prices': 4.4310333336100856}, 'IXIC_prices': {'LAKE_prices': nan, 'APA_prices': 361.75810073154423, 'SUN_prices': nan, 'ABT_prices': 35.426391870835246, 'UTX_prices': 276.77323911579606, 'WWD_prices': 140.44933762893177, 'AEM_prices': 65.678664752237154, 'T_prices': 4.4315575786665375, 'AAPL_prices': 228.58117077397364, 'AFG_prices': 38.211849885828357, 'MSFT_prices': 17.931595566693474, 'ORCL_prices': 3.3306913818409241, 'MCD_prices': 244.04818059385212, 'CAT_prices': 224.94863181519352, 'B_prices': 51.958153419245299}, 'B_prices': {'LAKE_prices': nan, 'SUN_prices': nan, 'WWD_prices': 140.44211142546212, 'T_prices': 4.4312135493833251, 'UTX_prices': 225.38348971098856, 'MCD_prices': 244.05545510684743, 'MSFT_prices': 17.911140925588171, 'ORCL_prices': 3.389302628336389, 'CAT_prices': 204.46242041494332}}

#qmemodelrmae = {'CAT_prices': {'LAKE_prices': 4.2566696687461505, 'SUN_prices': 4.2557623392616222, 'WWD_prices': 4.2145508563596437, 'UTX_prices': 4.2566696687461505, 'MCD_prices': 4.2566696687461505, 'MSFT_prices': 4.2562751863517017, 'ORCL_prices': 4.2566352252087558, 'T_prices': 4.2564017274021326}, 'APA_prices': {'LAKE_prices': 4.1853736653047449, 'SUN_prices': 4.1905176655139798, 'WWD_prices': 4.1853736653047449, 'T_prices': 4.1853736653047449, 'UTX_prices': 4.185407163582596, 'MCD_prices': 4.25062067960602, 'MSFT_prices': 4.1875175535289291, 'ORCL_prices': 4.1878964763840818, 'B_prices': 4.185329328175464, 'CAT_prices': 4.1853622492621927}, 'SUN_prices': {'UTX_prices': 2.6841286841560814, 'T_prices': 2.7383751872318243, 'WWD_prices': 2.6841615444694469}, 'ABT_prices': {'LAKE_prices': 1.7018480491014867, 'APA_prices': 1.6744541426889257, 'SUN_prices': 1.6740106077755199, 'WWD_prices': 1.6739784091126686, 'AEM_prices': 1.6739784091126686, 'T_prices': 1.6696239767510908, 'UTX_prices': 1.671882821687686, 'AFG_prices': 1.674001312879176, 'MSFT_prices': 1.6729189162160836, 'ORCL_prices': 1.7014086218441233, 'MCD_prices': 1.7000154161764904, 'B_prices': 1.7013961601880641, 'CAT_prices': 1.9384596709332436}, 'LAKE_prices': {'SUN_prices': 1.2482000460032545, 'WWD_prices': 1.1166532125348358, 'UTX_prices': 1.1166532125348358, 'MCD_prices': 1.1166544329886343, 'MSFT_prices': 1.1166458428295609, 'ORCL_prices': 1.2926213462368337, 'T_prices': 1.1166426120240704}, 'UTX_prices': {'WWD_prices': 3.4095963228761761}, 'AEM_prices': {'LAKE_prices': 3.8954138400507907, 'APA_prices': 3.8180946998346865, 'SUN_prices': 3.4190167274350434, 'AFG_prices': 3.8897219963323058, 'WWD_prices': 4.0056803940168395, 'T_prices': 3.8885253351498275, 'UTX_prices': 3.8896357218424478, 'MCD_prices': 3.8883705706378215, 'MSFT_prices': 3.4169957257563772, 'ORCL_prices': 3.8891064868253822, 'B_prices': 3.9417627203698253, 'CAT_prices': 3.8925980337305006}, 'T_prices': {'UTX_prices': 4.6716654659096708, 'WWD_prices': 4.6702952621809022}, 'AAPL_prices': {'LAKE_prices': 8.1343203762777492, 'APA_prices': 8.2064008588105253, 'SUN_prices': 7.9284266104106029, 'ABT_prices': 8.9805675955379716, 'WWD_prices': 8.1349283392912426, 'AEM_prices': 8.1352228114807534, 'T_prices': 8.1348462485020452, 'UTX_prices': 8.4940115872551409, 'AFG_prices': 8.1348462485020452, 'MSFT_prices': 8.1528826208675618, 'ORCL_prices': 8.1349813299241411, 'MCD_prices': 8.3752087437249472, 'B_prices': 8.1674688663358008, 'CAT_prices': 8.1345289915994883}, 'AFG_prices': {'LAKE_prices': 3.4151256205988867, 'APA_prices': 3.4416834575678008, 'SUN_prices': 3.3903114636739096, 'WWD_prices': 3.4151256205988867, 'T_prices': 3.4460289699579376, 'UTX_prices': 3.4152337921990288, 'MCD_prices': 3.4452554665359796, 'MSFT_prices': 3.5914211584851632, 'ORCL_prices': 3.445143492081586, 'B_prices': 3.4118038264754551, 'CAT_prices': 3.7162851988100538}, 'MSFT_prices': {'ORCL_prices': 2.2741164459901699, 'UTX_prices': 2.2741901257458856, 'WWD_prices': 1.1850499187419616, 'SUN_prices': 2.2742389139786265, 'T_prices': 2.2722130114736121}, 'ORCL_prices': {'UTX_prices': 2.7805470373116288, 'WWD_prices': 3.1375013382606256, 'SUN_prices': 3.1413768120061336, 'T_prices': 3.1414151185478261}, 'MCD_prices': {'SUN_prices': 9.3063058067770559, 'WWD_prices': 9.1713753195369954, 'UTX_prices': 9.2857652202930332, 'MSFT_prices': 9.1713753195369954, 'ORCL_prices': 9.170951222438438, 'T_prices': 9.1713753195369954}, 'IXIC_prices': {'LAKE_prices': 320.49322094886134, 'APA_prices': 228.40564339830985, 'SUN_prices': 297.09382775001279, 'ABT_prices': 273.29916154450063, 'UTX_prices': 273.31165939031865, 'WWD_prices': 267.32446859521804, 'AEM_prices': 271.29129941853046, 'T_prices': 273.31735564587166, 'AAPL_prices': 594.82147583805659, 'AFG_prices': 273.31582402248006, 'MSFT_prices': 272.90885057636336, 'ORCL_prices': 273.36254763135724, 'MCD_prices': 273.31582402248006, 'CAT_prices': 229.16588134765624, 'B_prices': 273.31582402248006}, 'B_prices': {'LAKE_prices': 2.7636022087795284, 'SUN_prices': 2.7636032384984635, 'WWD_prices': 2.7636022087795284, 'T_prices': 2.7636022087795284, 'UTX_prices': 2.8133637129091751, 'MCD_prices': 2.7636022087795284, 'MSFT_prices': 2.6593093161489447, 'ORCL_prices': 2.7634703723433751, 'CAT_prices': 2.5478143804213582}}
#qmemodelurmae = {'CAT_prices': {'LAKE_prices': 1.0644256339353673, 'SUN_prices': 4.2708524616715176, 'WWD_prices': 5.7242702758390136, 'UTX_prices': 8.7985202477648361, 'MCD_prices': 4.8777465059866314, 'MSFT_prices': 7.7287315842372921, 'ORCL_prices': 5.1748416009292102, 'T_prices': 3.4283624508801629}, 'APA_prices': {'LAKE_prices': 1.0636050035750944, 'SUN_prices': 4.3099161762038092, 'WWD_prices': 5.7185343225017871, 'T_prices': 3.2951018215004915, 'UTX_prices': 8.9699179057202301, 'MCD_prices': 4.8777686424504694, 'MSFT_prices': 7.3536078758489074, 'ORCL_prices': 5.1772289961771252, 'B_prices': 3.2702256607853508, 'CAT_prices': 16.529524470310584}, 'SUN_prices': {'UTX_prices': 8.8438760695114631, 'T_prices': 3.3320688104317857, 'WWD_prices': 5.7185343225017871}, 'ABT_prices': {'LAKE_prices': 1.0644256339353673, 'APA_prices': 16.541248175677133, 'SUN_prices': 4.2708686756931877, 'WWD_prices': 5.7185343225017871, 'AEM_prices': 4.4424695575938502, 'T_prices': 3.2946835748510424, 'UTX_prices': 9.0403152204027357, 'AFG_prices': 6.8359859678480364, 'MSFT_prices': 7.3349336910871124, 'ORCL_prices': 5.2550952930076447, 'MCD_prices': 4.8777275023117568, 'B_prices': 3.3013527514887793, 'CAT_prices': 16.509230689753114}, 'LAKE_prices': {'SUN_prices': 4.2709129031187567, 'WWD_prices': 5.7241298912397394, 'UTX_prices': 8.7566224453495991, 'MCD_prices': 4.8777686424504694, 'MSFT_prices': 7.3555201100368128, 'ORCL_prices': 5.1748091660293882, 'T_prices': 3.4270134218378003}, 'UTX_prices': {'WWD_prices': 5.7186495163861446}, 'AEM_prices': {'LAKE_prices': 1.0644256339353673, 'APA_prices': 16.541742053063086, 'SUN_prices': 4.3009204970465769, 'AFG_prices': 6.2977281782362198, 'WWD_prices': 5.7185343225017871, 'T_prices': 3.2951491901297976, 'UTX_prices': 8.9571991477916448, 'MCD_prices': 4.8779062221252838, 'MSFT_prices': 7.3375529519872726, 'ORCL_prices': 5.1955779100555217, 'B_prices': 3.3614982424218671, 'CAT_prices': 16.511307415931054}, 'T_prices': {'UTX_prices': 8.8012438381419464, 'WWD_prices': 5.8413633034899348}, 'AAPL_prices': {'LAKE_prices': 1.064419234656041, 'APA_prices': 16.539778895159952, 'SUN_prices': 4.2707659001443901, 'ABT_prices': 2.7345823637021134, 'WWD_prices': 5.7239250681758707, 'AEM_prices': 4.4326436952827803, 'T_prices': 3.4283749087963229, 'UTX_prices': 8.957468944125706, 'AFG_prices': 6.2610416798809778, 'MSFT_prices': 7.3372840195699451, 'ORCL_prices': 5.5697048935235713, 'MCD_prices': 4.9043217066845859, 'B_prices': 3.30195527107887, 'CAT_prices': 16.509920952990164}, 'AFG_prices': {'LAKE_prices': 1.0644108518276338, 'APA_prices': 16.540267776040469, 'SUN_prices': 4.2708436591952452, 'WWD_prices': 5.7185208264519183, 'T_prices': 3.4284787009744084, 'UTX_prices': 8.9489789115058045, 'MCD_prices': 4.8778105654747659, 'MSFT_prices': 7.6333151112974083, 'ORCL_prices': 5.1748091660293882, 'B_prices': 3.3013527514887793, 'CAT_prices': 16.509230689753114}, 'MSFT_prices': {'ORCL_prices': 5.1748792716880248, 'UTX_prices': 8.9573794645421643, 'WWD_prices': 5.4342970399295583, 'SUN_prices': 4.2710737979489997, 'T_prices': 3.6179591677547278}, 'ORCL_prices': {'UTX_prices': 8.9573429755915228, 'WWD_prices': 5.7059612436232223, 'SUN_prices': 4.2708436591952452, 'T_prices': 3.4283415058859035}, 'MCD_prices': {'SUN_prices': 4.2708436591952452, 'WWD_prices': 5.7185343225017871, 'UTX_prices': 8.9588186338836078, 'MSFT_prices': 7.3372840195699451, 'ORCL_prices': 5.1748114305384023, 'T_prices': 3.4283624508801629}, 'IXIC_prices': {'LAKE_prices': 1.0644256339353673, 'APA_prices': 16.967638021980235, 'SUN_prices': 4.2708436591952452, 'ABT_prices': 2.7412417455436358, 'UTX_prices': 8.9573826447031859, 'WWD_prices': 5.7185343225017871, 'AEM_prices': 4.4454735631257103, 'T_prices': 3.4282601951773648, 'AAPL_prices': 21.531509818282782, 'AFG_prices': 6.2653353959127189, 'MSFT_prices': 7.7535094990449789, 'ORCL_prices': 5.1744625091552736, 'MCD_prices': 4.8767855326334635, 'CAT_prices': 16.509230689753114, 'B_prices': 3.3012964778476293}, 'B_prices': {'LAKE_prices': 1.0999434065974616, 'SUN_prices': 4.2708436591952452, 'WWD_prices': 5.9653806486940075, 'T_prices': 3.4283848921457927, 'UTX_prices': 8.914615051419128, 'MCD_prices': 4.8777481502956812, 'MSFT_prices': 7.337289806440765, 'ORCL_prices': 5.174917038437588, 'CAT_prices': 16.509214017282126}}
#qmemodelrmse = {'CAT_prices': {'LAKE_prices': 16.084745509328407, 'SUN_prices': 16.081375954821219, 'WWD_prices': 15.930503857681174, 'UTX_prices': 16.084745509328407, 'MCD_prices': 16.084745509328407, 'MSFT_prices': 16.083312912236632, 'ORCL_prices': 16.084602110370312, 'T_prices': 16.083769122603673}, 'APA_prices': {'LAKE_prices': 16.072292512382557, 'SUN_prices': 16.09487562989877, 'WWD_prices': 16.072292512382557, 'T_prices': 16.072292512382557, 'UTX_prices': 16.072437957065556, 'MCD_prices': 16.342200552248489, 'MSFT_prices': 16.081788015677258, 'ORCL_prices': 16.083325778736789, 'B_prices': 16.072102737426757, 'CAT_prices': 16.072242886412379}, 'SUN_prices': {'UTX_prices': nan, 'T_prices': nan, 'WWD_prices': nan}, 'ABT_prices': {'LAKE_prices': 6.1378694197710821, 'APA_prices': 6.0458589553833004, 'SUN_prices': 6.0443918465009698, 'WWD_prices': 6.0442848118302086, 'AEM_prices': 6.0442848118302086, 'T_prices': 6.0298677843380597, 'UTX_prices': 6.0372898463330236, 'AFG_prices': 6.0443590176650899, 'MSFT_prices': 6.0407594655853467, 'ORCL_prices': 6.1364075268016141, 'MCD_prices': 6.1317495794857253, 'B_prices': 6.1363654953202387, 'CAT_prices': 6.9240619185703256}, 'LAKE_prices': {'SUN_prices': nan, 'WWD_prices': nan, 'UTX_prices': nan, 'MCD_prices': nan, 'MSFT_prices': nan, 'ORCL_prices': nan, 'T_prices': nan}, 'UTX_prices': {'WWD_prices': 12.976559638977051}, 'AEM_prices': {'LAKE_prices': 14.246658297769384, 'APA_prices': 13.999493298499413, 'SUN_prices': 12.732630819432876, 'AFG_prices': 14.228688111648061, 'WWD_prices': 14.595345874861176, 'T_prices': 14.2249897801019, 'UTX_prices': 14.228555267932368, 'MCD_prices': 14.224516114378288, 'MSFT_prices': 12.723738595551135, 'ORCL_prices': 14.226825317682005, 'B_prices': 14.392365586523916, 'CAT_prices': 14.237316049314012}, 'T_prices': {'UTX_prices': 15.040901725120793, 'WWD_prices': 15.03667206608392}, 'AAPL_prices': {'LAKE_prices': 27.855305131899765, 'APA_prices': 28.078370561786727, 'SUN_prices': 27.226699475057764, 'ABT_prices': 30.427409956190321, 'WWD_prices': 27.857149440790312, 'AEM_prices': 27.858039531832429, 'T_prices': 27.856897710663041, 'UTX_prices': 28.951362260806015, 'AFG_prices': 27.856897710663041, 'MSFT_prices': 27.927510325113932, 'ORCL_prices': 27.857305489334404, 'MCD_prices': 28.587752094144136, 'B_prices': 27.967145677952985, 'CAT_prices': 27.855929161520564}, 'AFG_prices': {'LAKE_prices': 11.473329145144794, 'APA_prices': 11.554453833586249, 'SUN_prices': 11.39691575991562, 'WWD_prices': 11.473329145144794, 'T_prices': 11.567120505937563, 'UTX_prices': 11.473667748145807, 'MCD_prices': 11.564851528990502, 'MSFT_prices': 12.010457214654661, 'ORCL_prices': 11.564517042371962, 'B_prices': 11.46267818874783, 'CAT_prices': 12.394704958348493}, 'MSFT_prices': {'ORCL_prices': 8.2016114266090145, 'UTX_prices': 8.2018356946558733, 'WWD_prices': 4.6667975260541326, 'SUN_prices': 8.2019834680494927, 'T_prices': 8.195756613039503}, 'ORCL_prices': {'UTX_prices': 9.3539567062278195, 'WWD_prices': 10.449724809484545, 'SUN_prices': 10.460510703940797, 'T_prices': 10.460627610699024}, 'MCD_prices': {'SUN_prices': 30.640575398962483, 'WWD_prices': 30.23558486240362, 'UTX_prices': 30.584599787892859, 'MSFT_prices': 30.23558486240362, 'ORCL_prices': 30.234301453634025, 'T_prices': 30.23558486240362}, 'IXIC_prices': {'LAKE_prices': 1053.7349267897264, 'APA_prices': 767.19411046645223, 'SUN_prices': 981.06189379723241, 'ABT_prices': 906.81826522926883, 'UTX_prices': 906.8572425194036, 'WWD_prices': 888.1233152701185, 'AEM_prices': 900.54570567810458, 'T_prices': 906.87519515293093, 'AAPL_prices': 1906.1022448171977, 'AFG_prices': 906.87033436095794, 'MSFT_prices': 905.5992755565768, 'ORCL_prices': 907.01619785283901, 'MCD_prices': 906.87033436095794, 'CAT_prices': 769.15787074269815, 'B_prices': 906.87033436095794}, 'B_prices': {'LAKE_prices': 9.5614003399618319, 'SUN_prices': 9.5613894319222652, 'WWD_prices': 9.5614003399618319, 'T_prices': 9.5614003399618319, 'UTX_prices': 9.7127178017610039, 'MCD_prices': 9.5614003399618319, 'MSFT_prices': 9.2455800573810247, 'ORCL_prices': 9.5609885695713022, 'CAT_prices': 8.9078498428943114}}
#qmemodelurmse = {'CAT_prices': {'LAKE_prices': nan, 'SUN_prices': nan, 'WWD_prices': 18.933394231359944, 'UTX_prices': 29.769797426111559, 'MCD_prices': 17.39275322209776, 'MSFT_prices': 24.894433693480646, 'ORCL_prices': 16.775710393868241, 'T_prices': 11.29702768263474}, 'APA_prices': {'LAKE_prices': nan, 'SUN_prices': nan, 'WWD_prices': 18.915911969951555, 'T_prices': 10.893885921652799, 'UTX_prices': 30.304025014241535, 'MCD_prices': 17.392825367248136, 'MSFT_prices': 23.731168599845539, 'ORCL_prices': 16.783117032518575, 'B_prices': 11.147210351781908, 'CAT_prices': 53.733179389105899}, 'SUN_prices': {'UTX_prices': 29.912225636002287, 'T_prices': 11.006088241876339, 'WWD_prices': 18.915911969951555}, 'ABT_prices': {'LAKE_prices': nan, 'APA_prices': 54.356586790396499, 'SUN_prices': nan, 'WWD_prices': 18.915911969951555, 'AEM_prices': 15.98466941983092, 'T_prices': 10.892642588397257, 'UTX_prices': 30.52313053904016, 'AFG_prices': 22.020024906731898, 'MSFT_prices': 23.673321433472477, 'ORCL_prices': 17.025344342499778, 'MCD_prices': 17.392709215949562, 'B_prices': 11.242148024116466, 'CAT_prices': 53.670357473535475}, 'LAKE_prices': {'SUN_prices': nan, 'WWD_prices': 18.932986966301414, 'UTX_prices': 29.638925634645947, 'MCD_prices': 17.392825367248136, 'MSFT_prices': 23.737063434077243, 'ORCL_prices': 16.775609249538846, 'T_prices': 11.292999774957794}, 'UTX_prices': {'WWD_prices': 18.916270601359848}, 'AEM_prices': {'LAKE_prices': nan, 'APA_prices': 54.358146333382798, 'SUN_prices': nan, 'AFG_prices': 20.350191368152892, 'WWD_prices': 18.915911969951555, 'T_prices': 10.89404252120872, 'UTX_prices': 30.264360051373252, 'MCD_prices': 17.393313758201849, 'MSFT_prices': 23.681385374380874, 'ORCL_prices': 16.842306767881308, 'B_prices': 11.425273957595326, 'CAT_prices': 53.676721620248031}, 'T_prices': {'UTX_prices': 29.781232078402649, 'WWD_prices': 19.285348074420604}, 'AAPL_prices': {'LAKE_prices': nan, 'APA_prices': 54.352108769634967, 'SUN_prices': nan, 'ABT_prices': 9.4734431684406761, 'WWD_prices': 18.932396553388607, 'AEM_prices': 15.954727888418958, 'T_prices': 11.297062163259469, 'UTX_prices': 30.265198262532554, 'AFG_prices': 20.236709036234938, 'MSFT_prices': 23.680554498410693, 'ORCL_prices': 18.004436999052956, 'MCD_prices': 17.475221661337059, 'B_prices': 11.243992330513748, 'CAT_prices': 53.672476864484402}, 'AFG_prices': {'LAKE_prices': nan, 'APA_prices': 54.35360884822272, 'SUN_prices': nan, 'WWD_prices': 18.915866093853719, 'T_prices': 11.297374207989064, 'UTX_prices': 30.239567166995378, 'MCD_prices': 17.392963713602303, 'MSFT_prices': 24.599378653133616, 'ORCL_prices': 16.775609249538846, 'B_prices': 11.242148024116466, 'CAT_prices': 53.670357473535475}, 'MSFT_prices': {'ORCL_prices': 16.775827594831878, 'UTX_prices': 30.264923888561771, 'WWD_prices': 18.040557350208555, 'SUN_prices': nan, 'T_prices': 11.870024712257136}, 'ORCL_prices': {'UTX_prices': 30.264805563135084, 'WWD_prices': 18.877724264805614, 'SUN_prices': nan, 'T_prices': 11.296964803708144}, 'MCD_prices': {'SUN_prices': nan, 'WWD_prices': 18.915911969951555, 'UTX_prices': 30.269501425549876, 'MSFT_prices': 23.680554498410693, 'ORCL_prices': 16.775617277855968, 'T_prices': 11.29702768263474}, 'IXIC_prices': {'LAKE_prices': nan, 'APA_prices': 55.649138506721044, 'SUN_prices': nan, 'ABT_prices': 9.4929508707881745, 'UTX_prices': 30.264936609205858, 'WWD_prices': 18.915911969951555, 'AEM_prices': 15.994001199061575, 'T_prices': 11.296731931399675, 'AAPL_prices': 69.022513335982183, 'AFG_prices': 20.249967826893126, 'MSFT_prices': 24.971157557668249, 'ORCL_prices': 16.774538675944012, 'MCD_prices': 17.389578581167981, 'CAT_prices': 53.670357473535475, 'B_prices': 11.241974612466651}, 'B_prices': {'LAKE_prices': nan, 'SUN_prices': nan, 'WWD_prices': 19.670457408630771, 'T_prices': 11.297091417998271, 'UTX_prices': 30.132937502393535, 'MCD_prices': 17.392759629791858, 'MSFT_prices': 23.680574274998087, 'ORCL_prices': 16.775946319181156, 'CAT_prices': 53.670312470080809}}

msemodelrmae = {'CAT_prices': {'LAKE_prices': 7.4189559462802865, 'SUN_prices': 7.7677589503768223, 'WWD_prices': 8.8146107467950561, 'UTX_prices': 7.7102833567101969, 'MCD_prices': 7.9527303047429498, 'MSFT_prices': 7.0994726043900629, 'ORCL_prices': 6.9046768824259441, 'T_prices': 9.0199723412008854}, 'APA_prices': {'LAKE_prices': 7.5049788378422555, 'SUN_prices': 6.4280224996454578, 'WWD_prices': 5.9726286816441156, 'T_prices': 7.8110662753285922, 'UTX_prices': 6.1543917652828242, 'MCD_prices': 6.1888394271626188, 'MSFT_prices': 6.4519438266754152, 'ORCL_prices': 6.1832316601198487, 'B_prices': 7.4992017939199807, 'CAT_prices': 6.5416518008786868}, 'SUN_prices': {'UTX_prices': 4.7964527946671627, 'T_prices': 4.7629545461118612, 'WWD_prices': 4.818494385987325}, 'ABT_prices': {'LAKE_prices': 5.4312745194029963, 'APA_prices': 5.3714649537030388, 'SUN_prices': 5.407143568525127, 'WWD_prices': 5.3899184420217878, 'AEM_prices': 5.2592746959013095, 'T_prices': 5.3367212781719129, 'UTX_prices': 5.407241373747782, 'AFG_prices': 5.3391280984566878, 'MSFT_prices': 5.4265102810329857, 'ORCL_prices': 5.2869460623248727, 'MCD_prices': 5.2263910412009249, 'B_prices': 5.4236240711087493, 'CAT_prices': 5.2332166347628322}, 'LAKE_prices': {'SUN_prices': 0.61302663064470475, 'WWD_prices': 0.61472420302871011, 'UTX_prices': 0.61637640513625802, 'MCD_prices': 0.61787265375548717, 'MSFT_prices': 0.63687520572562628, 'ORCL_prices': 0.66108849765428535, 'T_prices': 0.5988478521895565}, 'UTX_prices': {'WWD_prices': 7.86572755676469}, 'AEM_prices': {'LAKE_prices': 2.5663116364697225, 'APA_prices': 2.6269528613371009, 'SUN_prices': 2.6511811038247899, 'AFG_prices': 2.9196089074502583, 'WWD_prices': 2.5584474819158416, 'T_prices': 2.6017508743635189, 'UTX_prices': 3.5078947709276784, 'MCD_prices': 2.8166111992854699, 'MSFT_prices': 2.5988495901519175, 'ORCL_prices': 2.7871236978792675, 'B_prices': 2.8585855910980622, 'CAT_prices': 2.6429672780379749}, 'T_prices': {'UTX_prices': 3.7939380296694689, 'WWD_prices': 3.9946442653930263}, 'AAPL_prices': {'LAKE_prices': 6.6043916153751949, 'APA_prices': 6.5791028091330936, 'SUN_prices': 7.2577466653063407, 'ABT_prices': 7.1307769476198679, 'WWD_prices': 6.3914330974902986, 'AEM_prices': 6.6276948704439054, 'T_prices': 6.8342721602495979, 'UTX_prices': 4.2605121338289544, 'AFG_prices': 6.7159442614885716, 'MSFT_prices': 6.3719373353945663, 'ORCL_prices': 6.0736448225632209, 'MCD_prices': 5.9378070232914943, 'B_prices': 6.2905103022756137, 'CAT_prices': 6.7053741068621866}, 'AFG_prices': {'LAKE_prices': 6.0886600145327501, 'APA_prices': 5.3128117829366444, 'SUN_prices': 6.5769521052541293, 'WWD_prices': 6.090142480688157, 'T_prices': 5.3837023616616246, 'UTX_prices': 5.96002185173284, 'MCD_prices': 6.0597331065757603, 'MSFT_prices': 6.0290285646525863, 'ORCL_prices': 6.5820869483199775, 'B_prices': 6.0426656373965191, 'CAT_prices': 6.1118939468284061}, 'MSFT_prices': {'ORCL_prices': 3.027737706626942, 'UTX_prices': 2.9698015312743342, 'WWD_prices': 2.9581926713581956, 'SUN_prices': 2.9606595026901346, 'T_prices': 2.9664076817581075}, 'ORCL_prices': {'UTX_prices': 2.060975129152435, 'WWD_prices': 2.2737664743186601, 'SUN_prices': 1.9039241949717203, 'T_prices': 1.7617614001230477}, 'MCD_prices': {'SUN_prices': 12.561082505868152, 'WWD_prices': 12.944912567637324, 'UTX_prices': 11.729369815502292, 'MSFT_prices': 11.579969451006722, 'ORCL_prices': 10.698808697469874, 'T_prices': 11.572065365859885}, 'IXIC_prices': {'LAKE_prices': 144.56723614860982, 'APA_prices': 147.95210605197482, 'SUN_prices': 132.32185846465865, 'ABT_prices': 149.16165560055401, 'UTX_prices': 162.47350242465151, 'WWD_prices': 161.37985369115094, 'AEM_prices': 160.96134434120327, 'T_prices': 138.0868001102622, 'AAPL_prices': 163.21302492228989, 'AFG_prices': 144.49996094547845, 'MSFT_prices': 136.75007258396522, 'ORCL_prices': 144.62555232827179, 'MCD_prices': 135.46065655876609, 'CAT_prices': 143.58944351096559, 'B_prices': 162.5710812437768}, 'B_prices': {'LAKE_prices': 3.1860909842198191, 'SUN_prices': 3.2524724573870891, 'WWD_prices': 3.2024382310755111, 'T_prices': 3.1897580576877966, 'UTX_prices': 3.1875854766446778, 'MCD_prices': 3.1735986067578685, 'MSFT_prices': 3.2107460782418844, 'ORCL_prices': 3.2253886833689571, 'CAT_prices': 3.4940195033752839}}
msemodelurmae = {'CAT_prices': {'LAKE_prices': 1.259900835136962, 'SUN_prices': 2.7416355245253619, 'WWD_prices': 7.4259789261163451, 'UTX_prices': 12.410424233729543, 'MCD_prices': 12.3902646806505, 'MSFT_prices': 7.2634924296460124, 'ORCL_prices': 3.7962904026305755, 'T_prices': 3.2176719207389683}, 'APA_prices': {'LAKE_prices': 1.2123078734266992, 'SUN_prices': 3.4042826250487681, 'WWD_prices': 7.9616599188910593, 'T_prices': 3.2419193155625288, 'UTX_prices': 11.627038323645499, 'MCD_prices': 13.586212310292362, 'MSFT_prices': 7.3805479972191108, 'ORCL_prices': 4.0658065926794915, 'B_prices': 3.1725584796830719, 'CAT_prices': 9.4855640536040262}, 'SUN_prices': {'UTX_prices': 11.860406683628856, 'T_prices': 3.2283235743154886, 'WWD_prices': 7.373024475496579}, 'ABT_prices': {'LAKE_prices': 1.2057781688528124, 'APA_prices': 8.057268155789842, 'SUN_prices': 3.2389057963502172, 'WWD_prices': 7.1988416796416237, 'AEM_prices': 4.4786485379038297, 'T_prices': 3.2645259199578778, 'UTX_prices': 11.561392569697761, 'AFG_prices': 9.504066808862623, 'MSFT_prices': 7.4193261813494118, 'ORCL_prices': 4.2111849442026976, 'MCD_prices': 13.520850232691547, 'B_prices': 3.8392015126795549, 'CAT_prices': 10.414084231308083}, 'LAKE_prices': {'SUN_prices': 3.3199017353307188, 'WWD_prices': 6.925965646980635, 'UTX_prices': 11.810073436163609, 'MCD_prices': 13.57110667010538, 'MSFT_prices': 7.4977290035073274, 'ORCL_prices': 4.7457593176099993, 'T_prices': 3.2368591062383714}, 'UTX_prices': {'WWD_prices': 6.7172051984500261}, 'AEM_prices': {'LAKE_prices': 1.4189022391450172, 'APA_prices': 7.4717431492275663, 'SUN_prices': 3.2129666714886436, 'AFG_prices': 9.3847043978622544, 'WWD_prices': 6.3908567652982828, 'T_prices': 3.3065463926277907, 'UTX_prices': 12.056111313314998, 'MCD_prices': 13.183005107306187, 'MSFT_prices': 7.2195937449636025, 'ORCL_prices': 4.1340665929457723, 'B_prices': 3.5870272318522134, 'CAT_prices': 9.34870751324822}, 'T_prices': {'UTX_prices': 10.606846925324085, 'WWD_prices': 7.2874389424043544}, 'AAPL_prices': {'LAKE_prices': 1.1474019222010194, 'APA_prices': 7.7239959423838096, 'SUN_prices': 3.1952853283850975, 'ABT_prices': 6.6303729512333094, 'WWD_prices': 7.2000959832683886, 'AEM_prices': 3.2392284383960797, 'T_prices': 3.307627878002092, 'UTX_prices': 11.952962921491636, 'AFG_prices': 9.0420094882740703, 'MSFT_prices': 7.3628993738710493, 'ORCL_prices': 4.1995123352100645, 'MCD_prices': 13.665689498302983, 'B_prices': 3.5097824769861559, 'CAT_prices': 10.256732041851368}, 'AFG_prices': {'LAKE_prices': 1.2103149794285593, 'APA_prices': 7.4340612199571394, 'SUN_prices': 2.7911225412406173, 'WWD_prices': 6.2232697592841255, 'T_prices': 3.2293233768612732, 'UTX_prices': 10.508723590576571, 'MCD_prices': 13.202337746215022, 'MSFT_prices': 7.32967830358767, 'ORCL_prices': 4.630398972829183, 'B_prices': 3.7557521539575913, 'CAT_prices': 9.2091466754090554}, 'MSFT_prices': {'ORCL_prices': 3.9636385923896738, 'UTX_prices': 10.786674303790322, 'WWD_prices': 6.8805345722273286, 'SUN_prices': 2.9969013123730428, 'T_prices': 3.0871381547715928}, 'ORCL_prices': {'UTX_prices': 11.375227787292081, 'WWD_prices': 6.4102465448815842, 'SUN_prices': 3.0080470110076707, 'T_prices': 3.3639610246895186}, 'MCD_prices': {'SUN_prices': 2.9450183965022267, 'WWD_prices': 6.6586390887989717, 'UTX_prices': 10.556027153114867, 'MSFT_prices': 7.478858277065302, 'ORCL_prices': 3.7565548011680057, 'T_prices': 3.2257497712677599}, 'IXIC_prices': {'LAKE_prices': 1.2111530922596752, 'APA_prices': 7.5448133160086241, 'SUN_prices': 3.0111982962664436, 'ABT_prices': 7.1384652468114114, 'UTX_prices': 11.471375566370346, 'WWD_prices': 7.2970111236073611, 'AEM_prices': 4.2417437210581657, 'T_prices': 3.2607452716702729, 'AAPL_prices': 17.240381712072036, 'AFG_prices': 9.4962725146923184, 'MSFT_prices': 7.3745413499719961, 'ORCL_prices': 4.2355179637086158, 'MCD_prices': 13.238710213954153, 'CAT_prices': 10.267477020562863, 'B_prices': 3.7080863304387508}, 'B_prices': {'LAKE_prices': 1.1966860108905368, 'SUN_prices': 3.3549919125301386, 'WWD_prices': 6.7933523090836267, 'T_prices': 3.2298416963589736, 'UTX_prices': 11.203098854364134, 'MCD_prices': 12.578512600668116, 'MSFT_prices': 7.2691734712887435, 'ORCL_prices': 4.7850455022325704, 'CAT_prices': 9.9705036263060727}}
#msemodelrmse = {'CAT_prices': {'LAKE_prices': 70.190013371885215, 'SUN_prices': 75.825078727373111, 'WWD_prices': 94.135981221915856, 'UTX_prices': 74.896269764619717, 'MCD_prices': 78.889690384210326, 'MSFT_prices': 65.11481975480622, 'ORCL_prices': 62.162001316843472, 'T_prices': 97.940933137781485}, 'APA_prices': {'LAKE_prices': 76.251393339369031, 'SUN_prices': 58.956429238412895, 'WWD_prices': 51.95646341859905, 'T_prices': 81.482744099735442, 'UTX_prices': 54.70405344869576, 'MCD_prices': 55.206080465379102, 'MSFT_prices': 59.335737975126776, 'ORCL_prices': 55.200296501708188, 'B_prices': 76.144542806288769, 'CAT_prices': 60.721341746461157}, 'SUN_prices': {'UTX_prices': 35.314740172242807, 'T_prices': 34.968177748038102, 'WWD_prices': 35.552663511388445}, 'ABT_prices': {'LAKE_prices': 32.707904446670433, 'APA_prices': 32.033128820681107, 'SUN_prices': 32.431728756973165, 'WWD_prices': 32.238062056996462, 'AEM_prices': 30.803701602711396, 'T_prices': 31.659016971962124, 'UTX_prices': 32.432677185457514, 'AFG_prices': 31.672189041835811, 'MSFT_prices': 32.647401557872499, 'ORCL_prices': 31.11502368403416, 'MCD_prices': 30.444563348308886, 'B_prices': 32.615449299531825, 'CAT_prices': 30.521916727302902}, 'LAKE_prices': {'SUN_prices': 1.3567446315989775, 'WWD_prices': 1.3632539446836982, 'UTX_prices': 1.3649245623669592, 'MCD_prices': 1.3682492556914785, 'MSFT_prices': 1.4060786480997123, 'ORCL_prices': 1.4552524837793088, 'T_prices': 1.3322555356555514}, 'UTX_prices': {'WWD_prices': 74.254595338908672}, 'AEM_prices': {'LAKE_prices': 10.519204983680076, 'APA_prices': 10.985585650275736, 'SUN_prices': 11.174411296221166, 'AFG_prices': 13.372237542096306, 'WWD_prices': 10.439952374127955, 'T_prices': 10.781740608713985, 'UTX_prices': 18.158261038586986, 'MCD_prices': 12.528866367714079, 'MSFT_prices': 10.757474428064683, 'ORCL_prices': 12.296716609032325, 'B_prices': 12.878723685570012, 'CAT_prices': 11.110427401424234}, 'T_prices': {'UTX_prices': 15.555186038547092, 'WWD_prices': 17.102882799136093}, 'AAPL_prices': {'LAKE_prices': 57.791485017265373, 'APA_prices': 57.385863579644095, 'SUN_prices': 68.261283864538655, 'ABT_prices': 66.124958452212269, 'WWD_prices': 54.555159594965914, 'AEM_prices': 58.126946263531451, 'T_prices': 61.376902282315925, 'UTX_prices': 27.036721756879022, 'AFG_prices': 59.501969859802642, 'MSFT_prices': 54.229388387842114, 'ORCL_prices': 50.10251100826887, 'MCD_prices': 48.084145220588233, 'B_prices': 53.020030900543809, 'CAT_prices': 59.334403044258067}, 'AFG_prices': {'LAKE_prices': 43.515516762328303, 'APA_prices': 33.752976102143329, 'SUN_prices': 50.297738328322865, 'WWD_prices': 43.531837882247629, 'T_prices': 34.585626928790724, 'UTX_prices': 41.716191150939544, 'MCD_prices': 43.064622706992957, 'MSFT_prices': 42.632671480864481, 'ORCL_prices': 50.323689639022923, 'B_prices': 42.864165481866571, 'CAT_prices': 43.736864426556757}, 'MSFT_prices': {'ORCL_prices': 12.38152916602839, 'UTX_prices': 11.952663439083723, 'WWD_prices': 11.891595967610677, 'SUN_prices': 11.901760238448, 'T_prices': 11.948560370650945}, 'ORCL_prices': {'UTX_prices': 5.4887078229118798, 'WWD_prices': 6.4747677441515954, 'SUN_prices': 4.8336759928784341, 'T_prices': 4.2692267081316784}, 'MCD_prices': {'SUN_prices': 175.67630515503728, 'WWD_prices': 185.76011587903392, 'UTX_prices': 154.99446498895782, 'MSFT_prices': 151.37527820861416, 'ORCL_prices': 131.43658104192198, 'T_prices': 150.81710340711805}, 'IXIC_prices': {'LAKE_prices': 27444.01022773693, 'APA_prices': 28586.708241421569, 'SUN_prices': 23534.563602941176, 'ABT_prices': 29079.365466707517, 'UTX_prices': 33783.288403799022, 'WWD_prices': 33386.30485089869, 'AEM_prices': 33232.233956290853, 'T_prices': 25330.675209354577, 'AAPL_prices': 34054.214312704251, 'AFG_prices': 27421.600674019606, 'MSFT_prices': 24890.231862745099, 'ORCL_prices': 27463.413214869281, 'MCD_prices': 24513.88857230392, 'CAT_prices': 27118.764976511437, 'B_prices': 33810.678727532679}, 'B_prices': {'LAKE_prices': 12.783442184348512, 'SUN_prices': 13.263285338956546, 'WWD_prices': 12.911192825417114, 'T_prices': 12.809068612491384, 'UTX_prices': 12.805880896873724, 'MCD_prices': 12.707503609252132, 'MSFT_prices': 12.967055062686695, 'ORCL_prices': 13.070102382485384, 'CAT_prices': 15.017603192298241}}
#msemodelurmse = {'CAT_prices': {'LAKE_prices': 3.0418734556709239, 'SUN_prices': 19.292504141689125, 'WWD_prices': 61.095753459057775, 'UTX_prices': 174.23841923732382, 'MCD_prices': 174.35059822431577, 'MSFT_prices': 60.569989971086088, 'ORCL_prices': 16.111118910047743, 'T_prices': 11.804439735412597}, 'APA_prices': {'LAKE_prices': 2.9035486258712471, 'SUN_prices': 23.816132344763265, 'WWD_prices': 69.708670123729831, 'T_prices': 11.959379083970013, 'UTX_prices': 154.52597181532118, 'MCD_prices': 206.05279987808925, 'MSFT_prices': 62.518796275020428, 'ORCL_prices': 18.287941874086467, 'B_prices': 12.762492744595397, 'CAT_prices': 107.74562254263685}, 'SUN_prices': {'UTX_prices': 160.15483964907577, 'T_prices': 11.874331130233465, 'WWD_prices': 60.265560593947868}, 'ABT_prices': {'LAKE_prices': 2.8850373773013844, 'APA_prices': 86.151668431400481, 'SUN_prices': 22.573530592326247, 'WWD_prices': 57.627978804843877, 'AEM_prices': 27.780456722483915, 'T_prices': 12.103289553075054, 'UTX_prices': 152.83045744054456, 'AFG_prices': 102.10722253338184, 'MSFT_prices': 63.150859937480853, 'ORCL_prices': 19.534125827963834, 'MCD_prices': 204.27181595945669, 'B_prices': 17.810753801133899, 'CAT_prices': 126.44766007965686}, 'LAKE_prices': {'SUN_prices': 23.139976442873088, 'WWD_prices': 53.56157725215737, 'UTX_prices': 159.01366688846764, 'MCD_prices': 205.64026158152063, 'MSFT_prices': 64.405350768644041, 'ORCL_prices': 24.452236365025339, 'T_prices': 11.926065195619671}, 'UTX_prices': {'WWD_prices': 50.580947746326721}, 'AEM_prices': {'LAKE_prices': 3.55360625086267, 'APA_prices': 75.998729384179214, 'SUN_prices': 22.361291149862453, 'AFG_prices': 99.677425249885104, 'WWD_prices': 46.092250599580652, 'T_prices': 12.371713817820829, 'UTX_prices': 164.91541783949907, 'MCD_prices': 195.11229040607128, 'MSFT_prices': 59.877752206839766, 'ORCL_prices': 18.872123224595015, 'B_prices': 15.808549529430913, 'CAT_prices': 105.11791306040645}, 'T_prices': {'UTX_prices': 130.39821928934333, 'WWD_prices': 58.91891442591848}, 'AAPL_prices': {'LAKE_prices': 2.7151414272831937, 'APA_prices': 80.141166592267609, 'SUN_prices': 22.269871720457388, 'ABT_prices': 47.834493350359352, 'WWD_prices': 57.646965136559182, 'AEM_prices': 16.184644743975472, 'T_prices': 12.378915815415725, 'UTX_prices': 162.34992444406149, 'AFG_prices': 92.691536398494947, 'MSFT_prices': 62.243420130910437, 'ORCL_prices': 19.426415332470064, 'MCD_prices': 208.3119722254136, 'B_prices': 15.206853704514847, 'CAT_prices': 123.06020842907475}, 'AFG_prices': {'LAKE_prices': 2.8974790691550263, 'APA_prices': 75.280215646083064, 'SUN_prices': 19.528630573297637, 'WWD_prices': 43.890607467352176, 'T_prices': 11.880848556718016, 'UTX_prices': 128.19882068509369, 'MCD_prices': 195.64089124093647, 'MSFT_prices': 61.710483625823379, 'ORCL_prices': 23.344123915130016, 'B_prices': 17.130750234765944, 'CAT_prices': 102.61345902985218}, 'MSFT_prices': {'ORCL_prices': 17.462832237692439, 'UTX_prices': 134.43403998480903, 'WWD_prices': 52.913400019228071, 'SUN_prices': 20.874021709043216, 'T_prices': 10.977112913443372}, 'ORCL_prices': {'UTX_prices': 148.35159405477685, 'WWD_prices': 46.347576475455092, 'SUN_prices': 20.979950775819667, 'T_prices': 12.7520571889441}, 'MCD_prices': {'SUN_prices': 20.610752595639696, 'WWD_prices': 49.82609968995736, 'UTX_prices': 129.28283180785334, 'MSFT_prices': 64.104936347911561, 'ORCL_prices': 15.801034957287358, 'T_prices': 11.856375974767348}, 'IXIC_prices': {'LAKE_prices': 2.8998863475774628, 'APA_prices': 77.263516709072135, 'SUN_prices': 21.001335357840546, 'ABT_prices': 54.989010660009448, 'UTX_prices': 150.67118685853248, 'WWD_prices': 59.094946169385722, 'AEM_prices': 25.436748923507391, 'T_prices': 12.083013499640172, 'AAPL_prices': 332.72663622089459, 'AFG_prices': 101.94443064172283, 'MSFT_prices': 62.423065464792685, 'ORCL_prices': 19.755675187453726, 'MCD_prices': 196.19837399152368, 'CAT_prices': 123.32031710755591, 'B_prices': 16.796046672147863}, 'B_prices': {'LAKE_prices': 2.8587759697359374, 'SUN_prices': 23.416182717466665, 'WWD_prices': 51.686893198848551, 'T_prices': 11.88234537660686, 'UTX_prices': 144.41096775827845, 'MCD_prices': 179.42558709437552, 'MSFT_prices': 60.746534599354064, 'ORCL_prices': 24.845381084766263, 'CAT_prices': 117.07352165272033}}

MSEGraphPath = "/home/achivuku/PycharmProjects/financedataanalysis/MSE-Graph.png"
QMEGraphPath = "/home/achivuku/PycharmProjects/financedataanalysis/QME-Graph.png"

MSEErrorsDataframePath = "/home/achivuku/PycharmProjects/financedataanalysis/MSEErrors-Graph.pkl"
QMEErrorsDataframePath = "/home/achivuku/PycharmProjects/financedataanalysis/QMEErrors-Graph.pkl"

MSEModelFstatMAEPath = "/home/achivuku/PycharmProjects/financedataanalysis/MSECauses-Graph.pkl"
QMEModelFstatMAEPath = "/home/achivuku/PycharmProjects/financedataanalysis/QMECauses-Graph.pkl"

def calculatefstatistic(nestedrd, nestedurd, colour):

    nestedfstat = collections.defaultdict(dict)
    G = nx.DiGraph()

    dfout = pd.DataFrame(columns=columns, index=indexes)

    for outerkey, outervalue in nestedrd.iteritems():
        for innerkey, innervalue in nestedrd[outerkey].iteritems():
            restrictederror = nestedrd[outerkey][innerkey]
            unrestrictederror = nestedurd[outerkey][innerkey]

            dfout.loc[outerkey][innerkey.replace("prices", "restricted")] = restrictederror
            dfout.loc[outerkey][innerkey.replace("prices", "unrestricted")] = unrestrictederror

            fstat = (restrictederror - unrestrictederror) / unrestrictederror
            if ( fstat > 0.05 ):
                nestedfstat[outerkey][innerkey] = fstat
                G.add_edge(innerkey.rstrip('_prices'), outerkey.rstrip('_prices'), color=colour)
    # innerkey is granger influencing outerkey stock
    return nestedfstat, G, dfout

msemodelfstatmae, msemodelgraph, mseerrorsframe = calculatefstatistic(msemodelrmae,msemodelurmae, 'green')
qmemodelfstatmae, qmemodelgraph, qmeerrorsframe = calculatefstatistic(qmemodelrmae,qmemodelurmae, 'red')

print('msemodelfstatmae',msemodelfstatmae)
print('qmemodelfstatmae',qmemodelfstatmae)

# ('qmemodelfstatmae', defaultdict(<type 'dict'>, {'CAT_prices': {'LAKE_prices': 2.9990296485142887, 'T_prices': 0.2415261771139126}, 'APA_prices': {'LAKE_prices': 2.9350827151399748, 'T_prices': 0.2701803743954868, 'B_prices': 0.2798289054983286}, 'ABT_prices': {'LAKE_prices': 0.5988416614972505}, 'AFG_prices': {'LAKE_prices': 2.208465617139271}, 'AEM_prices': {'LAKE_prices': 2.6596392607051054, 'T_prices': 0.18007565387249022, 'B_prices': 0.1726207887379092}, 'AAPL_prices': {'LAKE_prices': 6.642026855054242, 'SUN_prices': 0.8564413961773346, 'ABT_prices': 2.2840728129980192, 'AFG_prices': 0.29928000234246777, 'WWD_prices': 0.4212150303155039, 'AEM_prices': 0.8352981585545118, 'MCD_prices': 0.7077200976252324, 'MSFT_prices': 0.11115810688563488, 'ORCL_prices': 0.4605767245197249, 'B_prices': 1.4735249862022477, 'T_prices': 1.3727994939031125}, 'MCD_prices': {'ORCL_prices': 0.7722290648732423, 'SUN_prices': 1.1790321888136366, 'MSFT_prices': 0.24996869346684367, 'T_prices': 1.6751475233263127, 'WWD_prices': 0.603798246597676}, 'IXIC_prices': {'LAKE_prices': 300.0949856251977, 'CAT_prices': 12.881075723891486, 'APA_prices': 12.461251536744735, 'T_prices': 78.72479919416715, 'ABT_prices': 98.6990367554397, 'UTX_prices': 29.512446574104708, 'AFG_prices': 42.62349447417956, 'WWD_prices': 45.74702528991151, 'AEM_prices': 60.02641159961811, 'AAPL_prices': 26.625627782636187, 'MCD_prices': 55.04425747114812, 'MSFT_prices': 34.19810617501382, 'ORCL_prices': 51.8291676957156, 'B_prices': 81.79045092026263, 'SUN_prices': 68.56326465155462}, 'B_prices': {'LAKE_prices': 1.512494908559331}}))
# ('msemodelfstatmae', defaultdict(<type 'dict'>, {'UTX_prices': {'WWD_prices': 0.17098217553033543}, 'CAT_prices': {'ORCL_prices': 0.8187957585229688, 'LAKE_prices': 4.888523715022208, 'T_prices': 1.803260420387845, 'SUN_prices': 1.8332573315782354, 'WWD_prices': 0.18699646666044886}, 'APA_prices': {'ORCL_prices': 0.5207884386957298, 'LAKE_prices': 5.190654207852949, 'T_prices': 1.4093956434487138, 'SUN_prices': 0.8882164636825278, 'B_prices': 1.3637710201228903}, 'SUN_prices': {'T_prices': 0.4753646703836883}, 'ABT_prices': {'LAKE_prices': 3.5043729101268744, 'T_prices': 0.6347614964689184, 'AEM_prices': 0.1742994904357557, 'ORCL_prices': 0.2554533064626181, 'SUN_prices': 0.6694352687312496, 'B_prices': 0.4126958569891147}, 'AFG_prices': {'ORCL_prices': 0.421494559527839, 'LAKE_prices': 4.030640881109695, 'B_prices': 0.6089095844700808, 'T_prices': 0.6671301487602306, 'SUN_prices': 1.3563824260939688}, 'AEM_prices': {'LAKE_prices': 0.8086599384155568}, 'AAPL_prices': {'LAKE_prices': 4.755953068917847, 'T_prices': 1.0662155515443612, 'ABT_prices': 0.07547147046886388, 'AEM_prices': 1.0460720805864627, 'ORCL_prices': 0.44627383795014147, 'B_prices': 0.7922792490767873, 'SUN_prices': 1.2713923544894874}, 'MCD_prices': {'SUN_prices': 3.2651966183935706, 'WWD_prices': 0.9440778205584074, 'UTX_prices': 0.11115381244933568, 'MSFT_prices': 0.548360594894264, 'ORCL_prices': 1.8480374342318524, 'T_prices': 2.5874032973462535}, 'IXIC_prices': {'LAKE_prices': 118.36330516143713, 'CAT_prices': 12.984880922878757, 'APA_prices': 18.60977692291594, 'T_prices': 41.348232874851064, 'ABT_prices': 19.895479692526497, 'UTX_prices': 13.163384459398333, 'AFG_prices': 14.21649265244999, 'WWD_prices': 21.11588429255004, 'AEM_prices': 36.94697533047779, 'AAPL_prices': 8.466903207137525, 'MCD_prices': 9.232164188924152, 'MSFT_prices': 17.543535942677238, 'ORCL_prices': 33.14589515791778, 'B_prices': 42.842312922779485, 'SUN_prices': 42.94325628728047}, 'B_prices': {'LAKE_prices': 1.6624285361611508}}))

graph_pos=nx.circular_layout(msemodelgraph)

nx.draw_networkx(msemodelgraph, graph_pos, with_labels=True, arrows=True, node_color = 'green')
plt.savefig(MSEGraphPath)

graph_pos = nx.circular_layout(qmemodelgraph)

nx.draw_networkx(qmemodelgraph, with_labels=True, arrows=True, node_color = 'red')
plt.savefig(QMEGraphPath)

mseerrorsframe.to_pickle(MSEErrorsDataframePath)
qmeerrorsframe.to_pickle(QMEErrorsDataframePath)
# QMEErrors = pd.read_pickle("QMEErrors-Graph.pkl")
# QMEErrors.loc['ABT_prices']['SUN_restricted']


with open(MSEModelFstatMAEPath, 'wb') as handle:
    pickle.dump(msemodelfstatmae,handle,protocol=pickle.HIGHEST_PROTOCOL)

with open(QMEModelFstatMAEPath, 'wb') as handle:
    pickle.dump(qmemodelfstatmae,handle,protocol=pickle.HIGHEST_PROTOCOL)
# handle1 = open("QMECauses-Graph.pkl", 'rb')
# QMECauses = pickle.load(handle1)
# QMECauses['B_prices']['LAKE_prices']

# Plot Options :
# https://networkx.github.io/documentation/networkx-1.10/reference/generated/networkx.drawing.nx_pylab.draw_networkx.html#networkx.drawing.nx_pylab.draw_networkx1
# https://www.udacity.com/wiki/creating-network-graphs-with-python
# TO DO : Remove duplicate vertices and add Ftest values as edge weights
